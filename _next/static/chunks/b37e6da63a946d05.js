(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,67458,(e,t,a)=>{"use strict";var s=e.r(71645).__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;a.c=function(e){return s.H.useMemoCache(e)}},932,(e,t,a)=>{"use strict";t.exports=e.r(67458)},16015,(e,t,a)=>{},98547,(e,t,a)=>{var s=e.i(47167);e.r(16015);var n=e.r(71645),r=n&&"object"==typeof n&&"default"in n?n:{default:n},c=void 0!==s.default&&s.default.env&&!0,i=function(e){return"[object String]"===Object.prototype.toString.call(e)},l=function(){function e(e){var t=void 0===e?{}:e,a=t.name,s=void 0===a?"stylesheet":a,n=t.optimizeForSpeed,r=void 0===n?c:n;o(i(s),"`name` must be a string"),this._name=s,this._deletedRulePlaceholder="#"+s+"-deleted-rule____{}",o("boolean"==typeof r,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=r,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var l="u">typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=l?l.getAttribute("content"):null}var t,a=e.prototype;return a.setOptimizeForSpeed=function(e){o("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),o(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},a.isOptimizeForSpeed=function(){return this._optimizeForSpeed},a.inject=function(){var e=this;if(o(!this._injected,"sheet already injected"),this._injected=!0,"u">typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(c||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,a){return"number"==typeof a?e._serverSheet.cssRules[a]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),a},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},a.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},a.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},a.insertRule=function(e,t){if(o(i(e),"`insertRule` accepts only strings"),"u"<typeof window)return"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++;if(this._optimizeForSpeed){var a=this.getSheet();"number"!=typeof t&&(t=a.cssRules.length);try{a.insertRule(e,t)}catch(t){return c||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var s=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,s))}return this._rulesCount++},a.replaceRule=function(e,t){if(this._optimizeForSpeed||"u"<typeof window){var a="u">typeof window?this.getSheet():this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!a.cssRules[e])return e;a.deleteRule(e);try{a.insertRule(t,e)}catch(s){c||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),a.insertRule(this._deletedRulePlaceholder,e)}}else{var s=this._tags[e];o(s,"old rule at index `"+e+"` not found"),s.textContent=t}return e},a.deleteRule=function(e){if("u"<typeof window)return void this._serverSheet.deleteRule(e);if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];o(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},a.flush=function(){this._injected=!1,this._rulesCount=0,"u">typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},a.cssRules=function(){var e=this;return"u"<typeof window?this._serverSheet.cssRules:this._tags.reduce(function(t,a){return a?t=t.concat(Array.prototype.map.call(e.getSheetForTag(a).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},a.makeStyleTag=function(e,t,a){t&&o(i(t),"makeStyleTag accepts only strings as second parameter");var s=document.createElement("style");this._nonce&&s.setAttribute("nonce",this._nonce),s.type="text/css",s.setAttribute("data-"+e,""),t&&s.appendChild(document.createTextNode(t));var n=document.head||document.getElementsByTagName("head")[0];return a?n.insertBefore(s,a):n.appendChild(s),s},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(e.prototype,t),e}();function o(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var d=function(e){for(var t=5381,a=e.length;a;)t=33*t^e.charCodeAt(--a);return t>>>0},h={};function m(e,t){if(!t)return"jsx-"+e;var a=String(t),s=e+a;return h[s]||(h[s]="jsx-"+d(e+"-"+a)),h[s]}function p(e,t){"u"<typeof window&&(t=t.replace(/\/style/gi,"\\/style"));var a=e+t;return h[a]||(h[a]=t.replace(/__jsx-style-dynamic-selector/g,e)),h[a]}var u=function(){function e(e){var t=void 0===e?{}:e,a=t.styleSheet,s=void 0===a?null:a,n=t.optimizeForSpeed,r=void 0!==n&&n;this._sheet=s||new l({name:"styled-jsx",optimizeForSpeed:r}),this._sheet.inject(),s&&"boolean"==typeof r&&(this._sheet.setOptimizeForSpeed(r),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"u">typeof window&&!this._fromServer&&(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var a=this.getIdAndRules(e),s=a.styleId,n=a.rules;if(s in this._instancesCounts){this._instancesCounts[s]+=1;return}var r=n.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[s]=r,this._instancesCounts[s]=1},t.remove=function(e){var t=this,a=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(a in this._instancesCounts,"styleId: `"+a+"` not found"),this._instancesCounts[a]-=1,this._instancesCounts[a]<1){var s=this._fromServer&&this._fromServer[a];s?(s.parentNode.removeChild(s),delete this._fromServer[a]):(this._indices[a].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[a]),delete this._instancesCounts[a]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],a=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return a[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,a;return t=this.cssRules(),void 0===(a=e)&&(a={}),t.map(function(e){var t=e[0],s=e[1];return r.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:a.nonce?a.nonce:void 0,dangerouslySetInnerHTML:{__html:s}})})},t.getIdAndRules=function(e){var t=e.children,a=e.dynamic,s=e.id;if(a){var n=m(s,a);return{styleId:n,rules:Array.isArray(t)?t.map(function(e){return p(n,e)}):[p(n,t)]}}return{styleId:m(s),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),x=n.createContext(null);function f(){return new u}function b(){return n.useContext(x)}x.displayName="StyleSheetContext";var g=r.default.useInsertionEffect||r.default.useLayoutEffect,y="u">typeof window?f():void 0;function j(e){var t=y||b();return t&&("u"<typeof window?t.add(e):g(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)])),null}j.dynamic=function(e){return e.map(function(e){return m(e[0],e[1])}).join(" ")},a.StyleRegistry=function(e){var t=e.registry,a=e.children,s=n.useContext(x),c=n.useState(function(){return s||t||f()})[0];return r.default.createElement(x.Provider,{value:c},a)},a.createStyleRegistry=f,a.style=j,a.useStyleRegistry=b},37902,(e,t,a)=>{t.exports=e.r(98547).style},74647,e=>{"use strict";e.i(47167);var t=e.i(43476),a=e.i(71645);let s=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim(),n=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)};var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,a.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:i="",children:l,iconNode:o,...d},h)=>(0,a.createElement)("svg",{ref:h,...r,width:t,height:t,stroke:e,strokeWidth:c?24*Number(n)/Number(t):n,className:s("lucide",i),...!l&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(d)&&{"aria-hidden":"true"},...d},[...o.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(l)?l:[l]])),i=(e,t)=>{let r=(0,a.forwardRef)(({className:r,...i},l)=>(0,a.createElement)(c,{ref:l,iconNode:t,className:s(`lucide-${n(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...i}));return r.displayName=n(e),r},l=i("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);class o{constructor(){this.ctx=new(window.AudioContext||window.webkitAudioContext),this.volume=.5,this.enabled=!0,this.buffers=[],this.loadSounds(["/subi-typing/sounds/correct.mp3","/subi-typing/sounds/incorrect.mp3"])}async loadSound(e){let t=await fetch(e),a=await t.arrayBuffer();return this.ctx.decodeAudioData(a)}async loadSounds(e){let t=e.map(e=>this.loadSound(e)),a=await Promise.all(t);return this.buffers.push(...a)}setVolume(e){this.volume=e}setEnabled(e){this.enabled=e}playKey(e=!1){if(!this.enabled)return;let t=this.buffers[+!!e];if(!t)return;let a=()=>{let a=this.ctx.createBufferSource();a.buffer=t,a.playbackRate.value=.9+.2*Math.random();let s=this.ctx.createGain();s.gain.setValueAtTime(this.volume*(e?.3:.5),this.ctx.currentTime),s.gain.exponentialRampToValueAtTime(.01,this.ctx.currentTime+a.buffer.duration),a.connect(s).connect(this.ctx.destination),a.start()};"suspended"===this.ctx.state?this.ctx.resume().then(a):a()}playStart(){if(!this.enabled)return;let e=this.ctx.currentTime;[440,554,659].forEach((t,a)=>{let s=this.ctx.createOscillator(),n=this.ctx.createGain();s.frequency.setValueAtTime(t,e+.1*a),n.gain.setValueAtTime(.05*this.volume,e+.1*a),n.gain.exponentialRampToValueAtTime(.01,e+.1*a+.2),s.connect(n),n.connect(this.ctx.destination),s.start(e+.1*a),s.stop(e+.1*a+.2)})}playSuccess(){if(!this.enabled)return;let e=this.ctx.currentTime;[523,659,783,1046].forEach((t,a)=>{let s=this.ctx.createOscillator(),n=this.ctx.createGain();s.frequency.setValueAtTime(t,e+.08*a),n.gain.setValueAtTime(.05*this.volume,e+.08*a),n.gain.exponentialRampToValueAtTime(.01,e+.08*a+.3),s.connect(n),n.connect(this.ctx.destination),s.start(e+.08*a),s.stop(e+.08*a+.3)})}}let d=e=>new Promise((t,a)=>{if(document.querySelector(`script[src="${e}"]`))return t();let s=document.createElement("script");s.src=e,s.async=!0,s.onload=()=>t(),s.onerror=()=>a(Error(`Failed to load script: ${e}`)),document.head.appendChild(s)}),h=(e,t=5e3)=>new Promise((a,s)=>{let n=Date.now(),r=()=>{let c=window[e];c?a(c):Date.now()-n>t?s(Error(`Timeout waiting for ${e}`)):requestAnimationFrame(r)};r()}),m=null;async function p(){if(m)return m;await d("/subi-typing/libs/jszip.min.js"),await h("JSZip",3e3),await d("/subi-typing/libs/epub.min.js");let e=await Promise.race([h("ePub",3e3),h("EPUB",3e3),h("epub",3e3)]).catch(()=>null);if(!e)throw Error("EPUB library failed to initialize");return m=e,e}function u(e){return e?e.replace(/[\r\n]+/g," ").replace(/\s{2,}/g," ").replace(/\[.*?\]/g,"").replace(/\{.*?\}/g,"").replace(/\s+([.,!?;:])/g,"$1").replace(/([.,!?;:])\s*/g,"$1 ").trim():""}async function x(e,t=null){if(!e||!(e instanceof File))throw Error("Invalid file provided");if(!e.name.toLowerCase().endsWith(".epub"))throw Error("File must be an EPUB");t?.({stage:"loading",message:"Loading EPUB library..."});let a=await p();if("function"!=typeof a)throw Error("EPUB library initialization error");return t?.({stage:"reading",message:"Reading file..."}),new Promise((s,n)=>{let r=new FileReader;r.onload=async r=>{try{t?.({stage:"parsing",message:"Parsing EPUB structure..."});let n=a(r.target.result);if(!n||void 0===n.loaded)throw Error("Failed to initialize EPUB book");let[c,i]=await Promise.all([n.loaded.metadata,n.loaded.spine]);t?.({stage:"extracting",message:"Extracting chapters..."});let l=[],o=i?.items||[],d=o.length;console.log(`Found ${d} spine items`);for(let e=0;e<o.length;e++){let a=o[e];t?.({stage:"extracting",message:`Processing section ${e+1} of ${d}...`,progress:(e+1)/d});try{let e=await n.section(a.href);if(!e){console.warn(`Section ${a.href} is null`);continue}let t="";if(e.document?.body)t=e.document.body.textContent||"";else if("function"==typeof e.load)try{let a=await e.load(n.load.bind(n));a?.body?t=a.body.textContent||"":a?.documentElement&&(t=a.documentElement.textContent||"")}catch(e){console.warn(`Failed to load section ${a.href}:`,e.message)}else if(e.contents){let a=new DOMParser().parseFromString(e.contents,"text/html");t=a.body?.textContent||a.documentElement?.textContent||""}else if(e.output){let a=new DOMParser().parseFromString(e.output,"text/html");t=a.body?.textContent||""}if((t=u(t))&&t.length>=50){let s=a.title;if(!s&&e.document){let t=e.document.querySelector("h1, h2, h3, title");s=t?.textContent?.trim()}s=s||`Chapter ${l.length+1}`,l.push({title:u(s).substring(0,100),href:a.href,content:t,wordCount:t.split(/\s+/).length}),console.log(`Added chapter: ${s} (${t.length} chars)`)}else console.log(`Skipped section ${a.href}: content too short (${t?.length||0} chars)`)}catch(e){console.warn(`Error processing section ${a.href}:`,e.message)}}if(0===l.length&&n.navigation){console.log("Trying navigation/TOC approach...");try{let e=await n.loaded.navigation;if(e?.toc)for(let t of e.toc)try{let e=await n.section(t.href);if(e){let a="";e.document?.body&&(a=u(e.document.body.textContent||"")),a&&a.length>=50&&l.push({title:t.label||`Chapter ${l.length+1}`,href:t.href,content:a,wordCount:a.split(/\s+/).length})}}catch(e){console.warn("TOC item error:",e.message)}}catch(e){console.warn("Navigation approach failed:",e.message)}}if(0===l.length)throw Error("No readable chapters found. The EPUB may use an unsupported format or be DRM protected.");t?.({stage:"complete",message:"Import complete!"});let h=l.reduce((e,t)=>e+t.wordCount,0);s({title:c?.title||e.name.replace(".epub",""),author:c?.creator||"Unknown Author",chapters:l,totalWords:h,chapterCount:l.length,addedAt:Date.now()})}catch(e){n(e)}},r.onerror=()=>n(Error("Failed to read file")),r.readAsArrayBuffer(e)})}let f=null;async function b(){return f||((f=new window.Dexie("LuminaTypeDB")).version(3).stores({books:"++id, title, author, content, type, chapterIndex, chapters, addedAt",epubBooks:"++id, title, author, addedAt",readingProgress:"bookId, chapterIndex, chunkIndex, charIndex, updatedAt",achievements:"id, unlockedAt",stats:"key, value"}),f.version(2).stores({books:"++id, title, author, content, type, chapterIndex, chapters, addedAt",epubBooks:"++id, title, author, addedAt",readingProgress:"bookId, chapterIndex, chunkIndex, charIndex, updatedAt"}),f.version(1).stores({books:"++id, title, author, content, type, chapterIndex, chapters, addedAt",epubBooks:"++id, title, author, addedAt"})),f}async function g(e){return(await b()).books.add({...e,addedAt:Date.now()})}async function y(e){return(await b()).epubBooks.add({...e,addedAt:Date.now()})}async function j(){return(await b()).books.toArray()}async function v(){return(await b()).epubBooks.toArray()}async function k(e){return(await b()).books.delete(e)}async function w(e){let t=await b();return await t.readingProgress.delete(e),t.epubBooks.delete(e)}async function N(e,t){let a=await b(),s={bookId:e,chapterIndex:t.chapterIndex,chunkIndex:t.chunkIndex,charIndex:t.charIndex,totalChapters:t.totalChapters||0,totalChunks:t.totalChunks||0,chapterTitle:t.chapterTitle||"",updatedAt:Date.now()};return a.readingProgress.put(s)}async function C(){return(await b()).readingProgress.toArray()}async function S(e){let t=await b();return!await t.achievements.get(e)&&(await t.achievements.put({id:e,unlockedAt:Date.now()}),!0)}async function _(){return(await b()).achievements.toArray()}async function T(e,t){let a=await b();await a.stats.put({key:e,value:t,updatedAt:Date.now()})}async function I(e){let t=await b(),a=await t.stats.get(e);return a?.value}async function E(e,t=1){await b();let a=(await I(e)||0)+t;return await T(e,a),a}async function A(){let e=await b();return(await e.stats.toArray()).reduce((e,t)=>(e[t.key]=t.value,e),{})}async function R(e){let t={contents:[{parts:[{text:`Paragraph about: ${e}. ~150 words. No markdown.`}]}],systemInstruction:{parts:[{text:"Typing practice creator."}]}},a=1e3;for(let e=0;e<5;e++)try{let e=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let a=await e.json();return a.candidates?.[0]?.content?.parts?.[0]?.text.trim()}catch(t){if(4===e)throw t;await new Promise(e=>setTimeout(e,a)),a*=2}}var M=e.i(932);let z=i("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),$=i("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),F=i("keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),O=i("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),P=i("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),B=i("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]);function L(e){let a,s,n,r,c,i,l,o,d,h,m,p,u,x,f,b,g,y,j,v,k,w,N=(0,M.c)(51),{view:C,setView:S,isDark:_,setIsDark:T}=e;N[0]!==S?(a=()=>S("practice"),N[0]=S,N[1]=a):a=N[1];let I=_?"#1a1b1e":"#f8f9fa";N[2]!==I?(s=(0,t.jsx)("div",{style:{color:I},className:"w-9 h-9 bg-accent rounded-lg flex items-center justify-center font-bold text-2xl",children:"S"}),N[2]=I,N[3]=s):s=N[3],N[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)("span",{className:"text-xl font-bold tracking-tighter ",children:"SubiType"}),N[4]=n):n=N[4],N[5]!==a||N[6]!==s?(r=(0,t.jsxs)("div",{className:"flex items-end gap-3 cursor-pointer",onClick:a,children:[s,n]}),N[5]=a,N[6]=s,N[7]=r):r=N[7],N[8]!==S?(c=()=>S("practice"),N[8]=S,N[9]=c):c=N[9];let E=`p-2 rounded-md ${"practice"===C&&"text-accent bg-white/5"}`;N[10]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t.jsx)(F,{size:20}),N[10]=i):i=N[10],N[11]!==c||N[12]!==E?(l=(0,t.jsx)("button",{onClick:c,className:E,title:"Practice",children:i}),N[11]=c,N[12]=E,N[13]=l):l=N[13],N[14]!==S?(o=()=>S("library"),N[14]=S,N[15]=o):o=N[15];let A=`p-2 rounded-md ${"library"===C&&"text-accent bg-white/5"}`;N[16]===Symbol.for("react.memo_cache_sentinel")?(d=(0,t.jsx)($,{size:20}),N[16]=d):d=N[16],N[17]!==o||N[18]!==A?(h=(0,t.jsx)("button",{onClick:o,className:A,title:"Library",children:d}),N[17]=o,N[18]=A,N[19]=h):h=N[19],N[20]!==S?(m=()=>S("achievements"),N[20]=S,N[21]=m):m=N[21];let R=`p-2 rounded-md ${"achievements"===C&&"text-accent bg-white/5"}`;N[22]===Symbol.for("react.memo_cache_sentinel")?(p=(0,t.jsx)(B,{size:20}),N[22]=p):p=N[22],N[23]!==m||N[24]!==R?(u=(0,t.jsx)("button",{onClick:m,className:R,title:"Achievements",children:p}),N[23]=m,N[24]=R,N[25]=u):u=N[25],N[26]!==S?(x=()=>S("settings"),N[26]=S,N[27]=x):x=N[27];let L=`p-2 rounded-md ${"settings"===C&&"text-accent bg-white/5"}`;N[28]===Symbol.for("react.memo_cache_sentinel")?(f=(0,t.jsx)(z,{size:20}),N[28]=f):f=N[28],N[29]!==x||N[30]!==L?(b=(0,t.jsx)("button",{onClick:x,className:L,title:"Settings",children:f}),N[29]=x,N[30]=L,N[31]=b):b=N[31],N[32]===Symbol.for("react.memo_cache_sentinel")?(g=(0,t.jsx)("div",{className:"w-px h-5 bg-[#2c2e33] mx-1"}),N[32]=g):g=N[32],N[33]!==_||N[34]!==T?(y=()=>T(!_),N[33]=_,N[34]=T,N[35]=y):y=N[35];let D=_?"Light mode":"Dark mode";return N[36]!==_?(j=_?(0,t.jsx)(O,{size:20}):(0,t.jsx)(P,{size:20}),N[36]=_,N[37]=j):j=N[37],N[38]!==y||N[39]!==D||N[40]!==j?(v=(0,t.jsx)("button",{onClick:y,className:"p-2 hover:text-accent",title:D,children:j}),N[38]=y,N[39]=D,N[40]=j,N[41]=v):v=N[41],N[42]!==h||N[43]!==u||N[44]!==b||N[45]!==v||N[46]!==l?(k=(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[l,h,u,b,g,v]}),N[42]=h,N[43]=u,N[44]=b,N[45]=v,N[46]=l,N[47]=k):k=N[47],N[48]!==k||N[49]!==r?(w=(0,t.jsxs)("nav",{className:"flex justify-between items-center px-8 py-6 max-w-7xl mx-auto",children:[r,k]}),N[48]=k,N[49]=r,N[50]=w):w=N[50],w}var D=e.i(37902);let W=i("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),U=i("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),H=i("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),q=i("skip-back",[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]]),G=i("skip-forward",[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]]),K=i("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),Y=i("flame",[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]]),V=[{minWpm:0,maxWpm:15,animal:"ðŸŒ",name:"Sleepy Snail",message:"Taking it slow and steady!"},{minWpm:15,maxWpm:25,animal:"ðŸ¢",name:"Chill Turtle",message:"Slow but determined!"},{minWpm:25,maxWpm:35,animal:"ðŸ¦¥",name:"Relaxed Sloth",message:"No rush, we're vibing!"},{minWpm:35,maxWpm:45,animal:"ðŸ•",name:"Happy Dog",message:"Good pace, keep it up!"},{minWpm:45,maxWpm:55,animal:"ðŸŽ",name:"Galloping Horse",message:"Now we're moving!"},{minWpm:55,maxWpm:70,animal:"ðŸ†",name:"Swift Leopard",message:"Fast and furious!"},{minWpm:70,maxWpm:85,animal:"ðŸ¦…",name:"Soaring Eagle",message:"Flying through the text!"},{minWpm:85,maxWpm:100,animal:"ðŸš€",name:"Rocket Ship",message:"BLAZING FAST!"},{minWpm:100,maxWpm:120,animal:"âš¡",name:"Lightning Bolt",message:"ARE YOU EVEN HUMAN?!"},{minWpm:120,maxWpm:1/0,animal:"ðŸŒŸ",name:"Typing God",message:"LEGENDARY SPEED!"}];function J(e){return V.find(t=>e>=t.minWpm&&e<t.maxWpm)||V[0]}let X={FIRST_WORDS:{id:"first_words",name:"First Steps",icon:"ðŸ‘¶",description:"Complete your first typing session"},SPEED_DEMON:{id:"speed_demon",name:"Speed Demon",icon:"ðŸ˜ˆ",description:"Reach 60+ WPM"},ROCKET_FINGERS:{id:"rocket_fingers",name:"Rocket Fingers",icon:"ðŸš€",description:"Reach 80+ WPM"},LIGHTNING_HANDS:{id:"lightning_hands",name:"Lightning Hands",icon:"âš¡",description:"Reach 100+ WPM"},PERFECTIONIST:{id:"perfectionist",name:"Perfectionist",icon:"ðŸ’Ž",description:"Complete a chunk with 100% accuracy"},STEADY_HANDS:{id:"steady_hands",name:"Steady Hands",icon:"ðŸŽ¯",description:"Complete 5 chunks with 95%+ accuracy"},COMBO_STARTER:{id:"combo_starter",name:"Combo Starter",icon:"ðŸ”¥",description:"Get a 10x combo"},COMBO_MASTER:{id:"combo_master",name:"Combo Master",icon:"ðŸ’¥",description:"Get a 50x combo"},COMBO_LEGEND:{id:"combo_legend",name:"Combo Legend",icon:"ðŸŒ‹",description:"Get a 100x combo"},BOOKWORM:{id:"bookworm",name:"Bookworm",icon:"ðŸ“š",description:"Complete 10 chapters"},CHAPTER_CRUSHER:{id:"chapter_crusher",name:"Chapter Crusher",icon:"ðŸ“–",description:"Complete a full chapter"},BOOK_FINISHER:{id:"book_finisher",name:"Book Finisher",icon:"ðŸ†",description:"Complete an entire book"},NIGHT_OWL:{id:"night_owl",name:"Night Owl",icon:"ðŸ¦‰",description:"Type after midnight"},EARLY_BIRD:{id:"early_bird",name:"Early Bird",icon:"ðŸ¦",description:"Type before 6 AM"},MARATHON_TYPER:{id:"marathon_typer",name:"Marathon Typer",icon:"ðŸƒ",description:"Type for 30+ minutes"},THREE_DAY_STREAK:{id:"three_day",name:"Getting Started",icon:"ðŸ“…",description:"3 day streak"},WEEK_STREAK:{id:"week_streak",name:"Weekly Warrior",icon:"ðŸ—“ï¸",description:"7 day streak"},MONTH_STREAK:{id:"month_streak",name:"Monthly Master",icon:"ðŸ“†",description:"30 day streak"}},Z=[{threshold:5,message:"Nice!",color:"#4ade80"},{threshold:10,message:"Great!",color:"#22d3ee"},{threshold:20,message:"Awesome!",color:"#a78bfa"},{threshold:30,message:"Amazing!",color:"#f472b6"},{threshold:50,message:"INCREDIBLE!",color:"#fb923c"},{threshold:75,message:"UNSTOPPABLE!",color:"#ef4444"},{threshold:100,message:"GODLIKE!!!",color:"#fbbf24"}];function Q(e){let t=Z.filter(t=>e>=t.threshold);return t.length>0?t[t.length-1]:null}let ee=["#e2b714","#4ade80","#22d3ee","#a78bfa","#f472b6","#fb923c","#ef4444","#fbbf24"],et={CALM:{min:0,max:3,shake:0,color:null},MILD:{min:3,max:6,shake:1,color:"rgba(255, 150, 50, 0.1)"},ANGRY:{min:6,max:10,shake:3,color:"rgba(255, 100, 50, 0.15)"},FURIOUS:{min:10,max:1/0,shake:5,color:"rgba(255, 50, 50, 0.2)"}},ea=["Master of the Keyboard","Typing Virtuoso","Key Crushing Champion","Digital Wordsmith","Finger Ninja","Button Basher Elite","Certified Keyboard Warrior","Lord of the Keys"],es=["This finger has conquered the QWERTY realm!","Officially faster than a caffeinated squirrel!","Your keyboard will never be the same.","Legend says they can type with their eyes closed.","Warning: May cause jealousy in fellow typists.","Achievement unlocked: Carpal tunnel prevention master!"];function en({text:e,userInput:s,wpm:n,accuracy:r,isFinished:c,fontSize:i,fontFamily:l,blurEnabled:o=!0,ignoreCaps:d=!1,autoSkipChars:h="",inputRef:m,onInputChange:p,onRestart:u,chunkInfo:x,sourceInfo:f,onNextChunk:b,onPrevChunk:g,onNextChapter:y,onPrevChapter:j,combo:v=0,maxCombo:k=0,recentErrors:w=0,bookProgress:N=null,onShowCertificate:C,totalStats:S=null}){let _=(0,a.useRef)(null),T=(0,a.useRef)(null),[I,E]=(0,a.useState)(!1),[A,R]=(0,a.useState)([]),[M,z]=(0,a.useState)(null),[$,F]=(0,a.useState)(!1),O=(0,a.useRef)(0),P=(0,a.useRef)(!1),B=(0,a.useRef)(0),L=(0,a.useRef)(0),V=(0,a.useRef)(e),X=(0,a.useMemo)(()=>{let t=[],a=0;return e.split(" ").forEach((s,n)=>{let r=[];for(let e=0;e<s.length;e++)r.push({char:s[e],index:a++});t.push({word:s,chars:r,wordIndex:n}),n<e.split(" ").length-1&&t.push({word:" ",chars:[{char:" ",index:a++}],isSpace:!0})}),t},[e]),Z=s.length,ea=J(n),es=w>=et.FURIOUS.min?et.FURIOUS:w>=et.ANGRY.min?et.ANGRY:w>=et.MILD.min?et.MILD:et.CALM;Q(v),(0,a.useEffect)(()=>{if(c&&!P.current){E(!0),R(function(e=100){let t=[];for(let a=0;a<e;a++)t.push({id:a,x:100*Math.random(),y:-10-20*Math.random(),rotation:360*Math.random(),color:ee[Math.floor(Math.random()*ee.length)],scale:.5+.5*Math.random(),speedX:(Math.random()-.5)*3,speedY:2+4*Math.random(),rotationSpeed:(Math.random()-.5)*10,shape:Math.random()>.5?"rect":"circle"});return t}(150));let e=setTimeout(()=>{E(!1),R([])},4e3);return P.current=!0,()=>clearTimeout(e)}c||(P.current=!1)},[c]),(0,a.useEffect)(()=>{let e=Q(v),t=Q(O.current);if(e&&(!t||e.threshold>t.threshold)){z(e);let t=setTimeout(()=>z(null),1e3);return O.current=v,()=>clearTimeout(t)}O.current=v},[v]),(0,a.useEffect)(()=>{if(w>B.current&&w>=3){F(!0);let e=setTimeout(()=>F(!1),100);return B.current=w,()=>clearTimeout(e)}B.current=w},[w]),(0,a.useEffect)(()=>{if(T.current&&_.current){let e=_.current,t=T.current,a=e.getBoundingClientRect(),s=t.getBoundingClientRect().top-a.top,n=a.height/2;(s>n||s<n-60)&&e.scrollTo({top:e.scrollTop+s-n+30,behavior:"smooth"})}},[Z]),(0,a.useEffect)(()=>{let e=e=>{document.activeElement===m.current||e.ctrlKey||e.altKey||e.metaKey||["Tab","Escape","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12"].includes(e.key)||m.current?.focus()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[m]),(0,a.useEffect)(()=>{e!==V.current&&(V.current=e,L.current=0);let t=L.current;if(L.current=s.length,!h||c||s.length<t)return;let a=s,n=!1;for(;a.length<e.length;){let t=e[a.length];if(h.includes(t))a+=t,n=!0;else break}n&&p(a)},[s,e,h,c,p]);let en=x?.total>1,er=!x?.hasNext,ec=f?.type==="epub"&&f.chapterIndex<f.totalChapters-1,ei=f?.type==="epub"&&f.chapterIndex>0;return(0,t.jsxs)("div",{className:`jsx-72d7b4e3bcd07ffc flex flex-col items-center justify-center min-h-[60vh] px-4 ${$?"animate-shake":""}`,children:[f&&(0,t.jsxs)("div",{className:"jsx-72d7b4e3bcd07ffc mb-6 text-center",children:[(0,t.jsx)("p",{className:"jsx-72d7b4e3bcd07ffc text-xs opacity-40 uppercase tracking-widest mb-1",children:"epub"===f.type?"Reading":"Practicing"}),(0,t.jsx)("h2",{className:"jsx-72d7b4e3bcd07ffc text-lg font-medium opacity-70 truncate max-w-md",children:f.bookTitle}),f.chapterTitle&&(0,t.jsxs)("p",{className:"jsx-72d7b4e3bcd07ffc text-sm opacity-40 mt-1",children:["Ch. ",f.chapterIndex+1,": ",f.chapterTitle]})]}),(0,t.jsxs)("div",{className:"jsx-72d7b4e3bcd07ffc flex gap-10 md:gap-16 mb-12 items-end",children:[v>0&&(0,t.jsxs)("div",{className:"jsx-72d7b4e3bcd07ffc flex flex-col items-center group relative",children:[(0,t.jsx)("span",{className:"jsx-72d7b4e3bcd07ffc text-[10px] tracking-[0.3em] uppercase opacity-30 mb-1",children:"combo"}),(0,t.jsxs)("div",{className:"jsx-72d7b4e3bcd07ffc flex items-center gap-1",children:[(0,t.jsx)(Y,{size:24,className:`${v>=10?"text-orange-500 animate-pulse":"text-orange-400/50"}`}),(0,t.jsxs)("span",{className:`jsx-72d7b4e3bcd07ffc text-4xl font-bold tabular-nums transition-all ${v>=50?"text-orange-400 scale-110":v>=20?"text-orange-500":"text-orange-600/70"}`,children:[v,"x"]})]}),M&&(0,t.jsx)("div",{style:{color:M.color},className:"jsx-72d7b4e3bcd07ffc absolute -top-8 left-1/2 -translate-x-1/2 text-lg font-black uppercase animate-bounce whitespace-nowrap",children:M.message})]}),(0,t.jsxs)("div",{className:"jsx-72d7b4e3bcd07ffc flex flex-col items-center group",children:[(0,t.jsx)("span",{className:"jsx-72d7b4e3bcd07ffc text-[10px] tracking-[0.3em] uppercase opacity-30 mb-1 group-hover:opacity-50 transition-opacity",children:"wpm"}),(0,t.jsx)("span",{className:"jsx-72d7b4e3bcd07ffc text-5xl font-light tabular-nums tracking-tight text-accent transition-all",children:n})]}),(0,t.jsxs)("div",{className:"jsx-72d7b4e3bcd07ffc flex flex-col items-center group",children:[(0,t.jsx)("span",{className:"jsx-72d7b4e3bcd07ffc text-[10px] tracking-[0.3em] uppercase opacity-30 mb-1 group-hover:opacity-50 transition-opacity",children:"accuracy"}),(0,t.jsxs)("span",{className:"jsx-72d7b4e3bcd07ffc text-5xl font-light tabular-nums tracking-tight text-accent transition-all",children:[r,(0,t.jsx)("span",{className:"jsx-72d7b4e3bcd07ffc text-2xl opacity-50",children:"%"})]})]}),n>0&&(0,t.jsxs)("div",{title:ea.message,className:"jsx-72d7b4e3bcd07ffc flex flex-col items-center group",children:[(0,t.jsx)("span",{className:"jsx-72d7b4e3bcd07ffc text-[10px] tracking-[0.3em] uppercase opacity-30 mb-1",children:"speed"}),(0,t.jsx)("div",{className:"jsx-72d7b4e3bcd07ffc text-4xl",children:ea.animal}),(0,t.jsx)("span",{className:"jsx-72d7b4e3bcd07ffc text-[9px] opacity-40 mt-1",children:ea.name})]})]}),(0,t.jsxs)("div",{onClick:()=>m.current?.focus(),className:"jsx-72d7b4e3bcd07ffc relative w-full max-w-4xl cursor-text",children:[(0,t.jsx)("div",{style:{background:"linear-gradient(to bottom, var(--background, #1a1b1e) 0%, transparent 100%)"},className:"jsx-72d7b4e3bcd07ffc absolute top-0 left-0 right-0 h-20 z-10 pointer-events-none rounded-2xl"}),(0,t.jsx)("div",{style:{background:"linear-gradient(to top, var(--background, #1a1b1e) 0%, transparent 100%)"},className:"jsx-72d7b4e3bcd07ffc absolute bottom-0 left-0 right-0 h-20 z-10 pointer-events-none rounded-2xl"}),(0,t.jsx)("div",{ref:_,style:{fontSize:`${i}px`,lineHeight:"1.8"},className:`jsx-72d7b4e3bcd07ffc relative max-h-[280px] overflow-hidden px-4 py-16 ${l} rounded-2xl`,children:(0,t.jsx)("div",{className:"jsx-72d7b4e3bcd07ffc flex flex-wrap justify-center",children:X.map((a,n)=>{let r=a.chars[0]?.index??0,c=a.chars[a.chars.length-1]?.index??0,i=Z>=r&&Z<=c+1;return(0,t.jsx)("span",{ref:i?T:null,className:`jsx-72d7b4e3bcd07ffc inline-block ${a.isSpace?"":"mx-[0.1em]"} transition-all duration-200`,children:a.chars.map(({char:a,index:n})=>{let r=(t=>{if(t<s.length){var a,n;return(a=s[t],n=e[t],a&&n&&(d?a.toLowerCase()===n.toLowerCase():a===n))?"correct":"incorrect"}if(t===s.length)return"current";if(!o)return"upcoming";let r=t-s.length;return r<=10?"near":r<=30?"medium":"far"})(n);return(0,t.jsxs)("span",{className:`jsx-72d7b4e3bcd07ffc 
                          relative inline-block transition-all duration-150
                          ${"correct"===r?"text-accent":""}
                          ${"incorrect"===r?"text-red-400 after:absolute after:bottom-0 after:left-0 after:right-0 after:h-[2px] after:bg-red-400":""}
                          ${"current"===r?"text-current":""}
                          ${"upcoming"===r?"opacity-50":""}
                          ${"near"===r?"opacity-70":""}
                          ${"medium"===r?"opacity-40 blur-[0.5px]":""}
                          ${"far"===r?"opacity-20 blur-[1px]":""}
                        `,children:["current"===r&&(0,t.jsx)("span",{style:{boxShadow:"0 0 8px var(--accent, #e2b714), 0 0 16px var(--accent, #e2b714)"},className:"jsx-72d7b4e3bcd07ffc absolute left-0 top-[0.1em] bottom-[0.1em] w-[2px] bg-accent animate-caret"})," "===a?"Â ":a]},n)})},n)})})}),(0,t.jsx)("input",{ref:m,type:"text",autoFocus:!0,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",value:s,onChange:e=>!c&&p(e.target.value),onKeyDown:e=>{"Enter"===e.key&&e.shiftKey&&(e.preventDefault(),u()),c&&(("ArrowRight"===e.key||"Enter"===e.key)&&(e.preventDefault(),x?.hasNext?b():f?.type==="epub"&&f.chapterIndex<f.totalChapters-1&&y()),"ArrowLeft"===e.key&&(e.preventDefault(),x?.hasPrev&&g()))},className:"jsx-72d7b4e3bcd07ffc fixed opacity-0 pointer-events-none -top-[9999px]"})]}),(0,t.jsxs)("div",{className:"jsx-72d7b4e3bcd07ffc w-full max-w-lg mt-10 space-y-4",children:[(0,t.jsxs)("div",{className:"jsx-72d7b4e3bcd07ffc",children:[(0,t.jsx)("div",{className:"jsx-72d7b4e3bcd07ffc h-[3px] bg-white/5 rounded-full overflow-hidden",children:(0,t.jsx)("div",{style:{width:`${s.length/e.length*100}%`,boxShadow:"0 0 10px var(--accent, #e2b714)"},className:"jsx-72d7b4e3bcd07ffc h-full bg-accent/60 transition-all duration-150 ease-out rounded-full"})}),(0,t.jsxs)("div",{className:"jsx-72d7b4e3bcd07ffc flex justify-between mt-2 text-[10px] opacity-30 tracking-widest uppercase",children:[(0,t.jsxs)("span",{className:"jsx-72d7b4e3bcd07ffc",children:[s.length," / ",e.length," chars"]}),(0,t.jsxs)("span",{className:"jsx-72d7b4e3bcd07ffc",children:[Math.round(s.length/e.length*100),"%"]})]})]}),en&&(0,t.jsxs)("div",{className:"jsx-72d7b4e3bcd07ffc flex flex-col items-center gap-3",children:[(0,t.jsxs)("div",{className:"jsx-72d7b4e3bcd07ffc flex items-center gap-4",children:[(0,t.jsx)("button",{onClick:g,disabled:!x?.hasPrev,title:"Previous chunk",className:"jsx-72d7b4e3bcd07ffc p-2 rounded-lg hover:bg-white/5 disabled:opacity-20 disabled:cursor-not-allowed transition-all",children:(0,t.jsx)(U,{size:20})}),x?.total>15?(0,t.jsxs)("div",{className:"jsx-72d7b4e3bcd07ffc flex flex-col items-center gap-2",children:[(0,t.jsx)("div",{className:"jsx-72d7b4e3bcd07ffc w-48 h-1.5 bg-white/10 rounded-full overflow-hidden",children:(0,t.jsx)("div",{style:{width:`${x.current/x.total*100}%`},className:"jsx-72d7b4e3bcd07ffc h-full bg-accent transition-all duration-300"})}),(0,t.jsxs)("span",{className:"jsx-72d7b4e3bcd07ffc text-xs tabular-nums opacity-50",children:[x.current," / ",x.total]})]}):(0,t.jsx)("div",{className:"jsx-72d7b4e3bcd07ffc flex items-center gap-2",children:Array.from({length:x?.total||0},(e,a)=>(0,t.jsx)("div",{className:`jsx-72d7b4e3bcd07ffc w-2 h-2 rounded-full transition-all ${a<x?.current?"bg-accent":a===x?.current-1?"bg-accent ring-2 ring-accent/30":"bg-white/10"}`},a))}),(0,t.jsx)("button",{onClick:b,disabled:!x?.hasNext,title:"Next chunk",className:"jsx-72d7b4e3bcd07ffc p-2 rounded-lg hover:bg-white/5 disabled:opacity-20 disabled:cursor-not-allowed transition-all",children:(0,t.jsx)(H,{size:20})})]}),x?.total>15&&x?.total<=50&&(0,t.jsx)("div",{className:"jsx-72d7b4e3bcd07ffc flex flex-wrap justify-center gap-1.5 max-w-xs",children:Array.from({length:x?.total||0},(e,a)=>(0,t.jsx)("div",{className:`jsx-72d7b4e3bcd07ffc w-1.5 h-1.5 rounded-full transition-all ${a<x?.current?"bg-accent":a===x?.current-1?"bg-accent ring-1 ring-accent/50":"bg-white/10"}`},a))})]}),f?.type==="epub"&&(0,t.jsxs)("div",{className:"jsx-72d7b4e3bcd07ffc flex items-center justify-center gap-4 pt-2",children:[(0,t.jsxs)("button",{onClick:j,disabled:!ei,title:"Previous chapter",className:"jsx-72d7b4e3bcd07ffc flex items-center gap-1 px-3 py-1 text-xs opacity-50 hover:opacity-100 disabled:opacity-20 disabled:cursor-not-allowed transition-all",children:[(0,t.jsx)(q,{size:14}),(0,t.jsx)("span",{className:"jsx-72d7b4e3bcd07ffc",children:"Prev Chapter"})]}),(0,t.jsxs)("span",{className:"jsx-72d7b4e3bcd07ffc text-xs opacity-30",children:["Chapter ",f.chapterIndex+1," of ",f.totalChapters]}),(0,t.jsxs)("button",{onClick:y,disabled:!ec,title:"Next chapter",className:"jsx-72d7b4e3bcd07ffc flex items-center gap-1 px-3 py-1 text-xs opacity-50 hover:opacity-100 disabled:opacity-20 disabled:cursor-not-allowed transition-all",children:[(0,t.jsx)("span",{className:"jsx-72d7b4e3bcd07ffc",children:"Next Chapter"}),(0,t.jsx)(G,{size:14})]})]}),N&&f?.type==="epub"&&(0,t.jsxs)("div",{className:"jsx-72d7b4e3bcd07ffc mt-6 pt-4 border-t border-white/5",children:[(0,t.jsxs)("div",{className:"jsx-72d7b4e3bcd07ffc flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"jsx-72d7b4e3bcd07ffc text-[10px] uppercase tracking-widest opacity-30",children:"Book Progress"}),(0,t.jsxs)("span",{className:"jsx-72d7b4e3bcd07ffc text-xs opacity-50",children:[Math.round(N.percentage),"% complete"]})]}),(0,t.jsx)("div",{className:"jsx-72d7b4e3bcd07ffc h-2 bg-white/5 rounded-full overflow-hidden",children:(0,t.jsx)("div",{style:{width:`${N.percentage}%`},className:"jsx-72d7b4e3bcd07ffc h-full bg-gradient-to-r from-accent/60 to-accent transition-all duration-500"})}),(0,t.jsxs)("div",{className:"jsx-72d7b4e3bcd07ffc flex justify-between mt-2 text-[9px] opacity-30",children:[(0,t.jsxs)("span",{className:"jsx-72d7b4e3bcd07ffc",children:[N.completedChapters," / ",N.totalChapters," chapters"]}),(0,t.jsxs)("span",{className:"jsx-72d7b4e3bcd07ffc",children:["~",N.estimatedRemaining," remaining"]})]})]})]}),es.color&&(0,t.jsx)("div",{style:{backgroundColor:es.color},className:"jsx-72d7b4e3bcd07ffc fixed inset-0 pointer-events-none z-40 transition-opacity duration-200"}),I&&(0,t.jsx)("div",{className:"jsx-72d7b4e3bcd07ffc fixed inset-0 pointer-events-none z-500 overflow-hidden",children:A.map(e=>(0,t.jsx)("div",{style:{left:`${e.x}%`,top:`${e.y}%`,transform:`rotate(${e.rotation}deg) scale(${e.scale})`,"--speed-x":e.speedX,"--speed-y":e.speedY,"--rotation-speed":e.rotationSpeed},className:"jsx-72d7b4e3bcd07ffc absolute animate-confetti-fall",children:"rect"===e.shape?(0,t.jsx)("div",{style:{backgroundColor:e.color},className:"jsx-72d7b4e3bcd07ffc w-3 h-2"}):(0,t.jsx)("div",{style:{backgroundColor:e.color},className:"jsx-72d7b4e3bcd07ffc w-2 h-2 rounded-full"})},e.id))}),c&&(0,t.jsx)("div",{className:"jsx-72d7b4e3bcd07ffc fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center animate-in fade-in duration-300",children:(0,t.jsxs)("div",{style:{backgroundColor:"var(--background, #1a1b1e)"},className:"jsx-72d7b4e3bcd07ffc border border-accent/20 rounded-2xl p-10 max-w-md w-full mx-4 text-center animate-in zoom-in-95 duration-300",children:[(0,t.jsx)("div",{className:"jsx-72d7b4e3bcd07ffc text-6xl mb-4 animate-bounce",children:ea.animal}),(0,t.jsx)("p",{className:"jsx-72d7b4e3bcd07ffc text-sm font-bold text-accent mb-1",children:ea.name}),(0,t.jsx)("p",{className:"jsx-72d7b4e3bcd07ffc text-xs opacity-50 mb-6",children:ea.message}),(0,t.jsx)("h2",{className:"jsx-72d7b4e3bcd07ffc text-xl font-bold mb-2",children:er&&!ec?"ðŸŽ‰ Book Complete!":er?"Chapter Complete!":"Chunk Complete!"}),en&&(0,t.jsxs)("p",{className:"jsx-72d7b4e3bcd07ffc text-sm opacity-40 mb-4",children:[x?.current," of ",x?.total," chunks"]}),(0,t.jsxs)("div",{className:"jsx-72d7b4e3bcd07ffc flex justify-center gap-8 mb-6",children:[(0,t.jsxs)("div",{className:"jsx-72d7b4e3bcd07ffc flex flex-col items-center",children:[(0,t.jsx)("span",{className:"jsx-72d7b4e3bcd07ffc text-[10px] tracking-[0.3em] uppercase opacity-40 mb-1",children:"wpm"}),(0,t.jsx)("span",{className:"jsx-72d7b4e3bcd07ffc text-4xl font-light text-accent",children:n})]}),(0,t.jsxs)("div",{className:"jsx-72d7b4e3bcd07ffc flex flex-col items-center",children:[(0,t.jsx)("span",{className:"jsx-72d7b4e3bcd07ffc text-[10px] tracking-[0.3em] uppercase opacity-40 mb-1",children:"accuracy"}),(0,t.jsxs)("span",{className:"jsx-72d7b4e3bcd07ffc text-4xl font-light text-accent",children:[r,"%"]})]}),k>0&&(0,t.jsxs)("div",{className:"jsx-72d7b4e3bcd07ffc flex flex-col items-center",children:[(0,t.jsx)("span",{className:"jsx-72d7b4e3bcd07ffc text-[10px] tracking-[0.3em] uppercase opacity-40 mb-1",children:"max combo"}),(0,t.jsxs)("span",{className:"jsx-72d7b4e3bcd07ffc text-4xl font-light text-orange-500",children:[k,"x"]})]})]}),(0,t.jsxs)("div",{className:"jsx-72d7b4e3bcd07ffc flex flex-col gap-3",children:[x?.hasNext?(0,t.jsxs)("button",{onClick:b,className:"jsx-72d7b4e3bcd07ffc inline-flex items-center justify-center gap-2 px-6 py-3 bg-accent text-[#1a1b1e] rounded-xl hover:scale-105 active:scale-95 transition-all font-bold uppercase tracking-widest text-xs",children:["Next Chunk",(0,t.jsx)(H,{size:16})]}):ec?(0,t.jsxs)("button",{onClick:y,className:"jsx-72d7b4e3bcd07ffc inline-flex items-center justify-center gap-2 px-6 py-3 bg-accent text-[#1a1b1e] rounded-xl hover:scale-105 active:scale-95 transition-all font-bold uppercase tracking-widest text-xs",children:["Next Chapter",(0,t.jsx)(G,{size:16})]}):f?.type==="epub"?(0,t.jsxs)("button",{onClick:C,className:"jsx-72d7b4e3bcd07ffc inline-flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-accent to-orange-500 text-[#1a1b1e] rounded-xl hover:scale-105 active:scale-95 transition-all font-bold uppercase tracking-widest text-xs",children:[(0,t.jsx)(K,{size:16}),"Get Certificate!"]}):null,(0,t.jsxs)("button",{onClick:u,className:"jsx-72d7b4e3bcd07ffc inline-flex items-center justify-center gap-2 px-6 py-3 bg-white/5 hover:bg-white/10 rounded-xl transition-all font-bold uppercase tracking-widest text-xs",children:[(0,t.jsx)(W,{size:14}),"Try Again"]})]}),(0,t.jsx)("p",{className:"jsx-72d7b4e3bcd07ffc text-[10px] opacity-30 mt-6 uppercase tracking-widest",children:"Press Enter to continue â€¢ Shift+Enter to restart"})]})}),(0,t.jsx)(D.default,{id:"72d7b4e3bcd07ffc",children:"@keyframes caret-blink{0%,70%{opacity:1}71%,to{opacity:0}}.animate-caret{animation:1s ease-in-out infinite caret-blink}@keyframes confetti-fall{0%{opacity:1;transform:translateY(0)translate(0)rotate(0)}to{transform:translateY(100vh)translateX(calc(var(--speed-x,0)*100px))rotate(calc(var(--rotation-speed,0)*360deg));opacity:0}}.animate-confetti-fall{animation:3s ease-out forwards confetti-fall}@keyframes shake{0%,to{transform:translate(0)}25%{transform:translate(-5px)rotate(-.5deg)}75%{transform:translate(5px)rotate(.5deg)}}.animate-shake{animation:.1s ease-in-out shake}@keyframes combo-pop{0%{opacity:0;transform:scale(.5)}50%{transform:scale(1.2)}to{opacity:1;transform:scale(1)}}.animate-combo-pop{animation:.3s ease-out forwards combo-pop}@keyframes fire-pulse{0%,to{filter:brightness()}50%{filter:brightness(1.3)drop-shadow(0 0 8px orange)}}.animate-fire{animation:.5s ease-in-out infinite fire-pulse}"})]})}let er=i("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),ec=i("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),ei=i("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),el=i("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),eo=i("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),ed=i("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),eh=i("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),em=i("circle-play",[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);function ep({books:e,epubBooks:s,prompt:n,isGenerating:r,onPromptChange:c,onGenerate:i,onSelectBook:o,onDeleteBook:d,onUploadEpub:h,onSelectChapter:m,onSelectEpubBook:p,readingProgressMap:u={},onResumeBook:x,onStartFromBeginning:f}){let b=(0,a.useRef)(null),[g,y]=(0,a.useState)(null),[j,v]=(0,a.useState)(!1),[k,w]=(0,a.useState)(null),N=async e=>{let t=e.target.files?.[0];if(t){v(!0),w({stage:"starting",message:"Starting import...",progress:0});try{await h(t,e=>{w(e)})}finally{v(!1),w(null),b.current&&(b.current.value="")}}};return(0,t.jsxs)("div",{className:"max-w-4xl mx-auto animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,t.jsxs)("div",{className:"bg-accent/5 border border-accent/20 rounded-2xl p-6 mb-12 flex flex-col md:flex-row gap-4 items-center",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("h3",{className:"text-lg font-bold flex items-center gap-2",children:[(0,t.jsx)(er,{size:18,className:"text-accent"})," AI Snippet Generator"]}),(0,t.jsx)("p",{className:"text-xs opacity-60",children:"Custom practice text via Gemini AI."})]}),(0,t.jsxs)("div",{className:"flex w-full md:w-auto gap-2",children:[(0,t.jsx)("input",{type:"text",placeholder:"coming soon...",className:"bg-black/20 border border-white/10 rounded-lg px-4 py-2 text-sm flex-1 md:w-64 focus:outline-none focus:border-accent disabled disabled:opacity-50",value:n,disabled:!0,onChange:e=>c(e.target.value),onKeyDown:e=>"Enter"===e.key&&i()}),(0,t.jsxs)("button",{onClick:i,disabled:r||!n.trim(),className:"bg-accent text-[#1a1b1e] px-4 py-2 rounded-lg font-bold text-xs uppercase tracking-widest hover:opacity-90 transition-all flex items-center gap-2 disabled:opacity-50",children:[r?(0,t.jsx)(ei,{className:"animate-spin",size:14}):(0,t.jsx)(ec,{size:14})," Generate"]})]})]}),(0,t.jsxs)("div",{className:"bg-accent/5 border border-accent/20 rounded-2xl p-6 mb-12",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("h3",{className:"text-lg font-bold flex items-center gap-2",children:[(0,t.jsx)(eo,{size:18,className:"text-accent"})," Import EPUB Book"]}),(0,t.jsx)("p",{className:"text-xs opacity-60",children:"Import books and practice typing by chapter."})]}),(0,t.jsx)("input",{type:"file",accept:".epub",ref:b,onChange:N,className:"hidden",disabled:j}),(0,t.jsx)("button",{onClick:()=>b.current?.click(),disabled:j,className:"bg-[#2c2e33] hover:bg-[#3a3d44] text-white px-4 py-2 rounded-lg font-bold text-xs uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:j?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ei,{className:"animate-spin",size:14})," Importing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eo,{size:14})," Choose EPUB"]})})]}),k&&(0,t.jsxs)("div",{className:"mt-4 p-4 bg-black/20 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)(ei,{className:"animate-spin text-accent",size:16}),(0,t.jsx)("span",{className:"text-sm",children:k.message})]}),"number"==typeof k.progress&&(0,t.jsx)("div",{className:"w-full bg-black/30 rounded-full h-2 overflow-hidden",children:(0,t.jsx)("div",{className:"bg-accent h-full transition-all duration-300 ease-out",style:{width:`${100*k.progress}%`}})})]})]}),s.length>0&&(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("h3",{className:"text-sm font-bold uppercase tracking-widest opacity-50 mb-4 flex items-center gap-2",children:[(0,t.jsx)($,{size:14})," EPUB Books (",s.length,")"]}),(0,t.jsx)("div",{className:"space-y-3",children:s.map(e=>{let a=u[e.id],s=a&&(a.chapterIndex>0||a.chunkIndex>0||a.charIndex>0);return(0,t.jsxs)("div",{className:"border border-[#2c2e33] rounded-xl overflow-hidden hover:border-accent/30 transition-colors",children:[(0,t.jsxs)("div",{className:"p-4 flex items-center justify-between cursor-pointer hover:bg-white/5",onClick:()=>y(g===e.id?null:e.id),children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-lg font-bold truncate pr-4",children:e.title}),(0,t.jsxs)("p",{className:"text-xs opacity-40 flex items-center gap-2",children:[(0,t.jsx)("span",{children:e.author}),(0,t.jsx)("span",{className:"opacity-50",children:"â€¢"}),(0,t.jsxs)("span",{children:[e.chapters?.length||0," chapters"]}),e.totalWords&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"opacity-50",children:"â€¢"}),(0,t.jsxs)("span",{children:[e.totalWords.toLocaleString()," words"]})]})]}),s&&(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,t.jsx)("div",{className:"h-1.5 flex-1 max-w-48 bg-black/30 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-accent/70 transition-all",style:{width:`${(a.chapterIndex/(e.chapters?.length||1)*100).toFixed(1)}%`}})}),(0,t.jsxs)("span",{className:"text-[10px] text-accent/80 font-mono",children:["Ch ",a.chapterIndex+1,"/",e.chapters?.length||0,a.chapterTitle&&(0,t.jsxs)("span",{className:"opacity-60 ml-1",children:["â€¢ ",a.chapterTitle.slice(0,20),a.chapterTitle.length>20?"...":""]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[g===e.id?(0,t.jsx)(ed,{size:18}):(0,t.jsx)(H,{size:18}),s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{onClick:t=>{t.stopPropagation(),x(e)},className:"bg-accent text-[#1a1b1e] px-3 py-1 rounded font-bold text-xs hover:opacity-90 transition-opacity flex items-center gap-1",children:[(0,t.jsx)(em,{size:12})," Resume"]}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),f(e)},className:"bg-[#2c2e33] hover:bg-[#3a3d44] text-white px-3 py-1 rounded font-bold text-xs transition-colors flex items-center gap-1",title:"Start from beginning",children:(0,t.jsx)(W,{size:12})})]}):(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),p(e)},className:"bg-accent text-[#1a1b1e] px-3 py-1 rounded font-bold text-xs hover:opacity-90 transition-opacity",children:"Start"}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),d(e.id,"epub")},className:"p-2 text-red-500/50 hover:text-red-500 transition-colors",children:(0,t.jsx)(el,{size:16})})]})]}),g===e.id&&e.chapters&&(0,t.jsx)("div",{className:"bg-black/20 border-t border-[#2c2e33] max-h-64 overflow-y-auto",children:e.chapters.map((n,r)=>{let c=s&&a.chapterIndex===r,i=s&&a.chapterIndex>r;return(0,t.jsxs)("div",{className:`p-3 hover:bg-white/5 cursor-pointer flex items-center gap-3 border-b border-[#2c2e33] last:border-0 transition-colors ${c?"bg-accent/10":""} ${i?"bg-green-500/5":""}`,onClick:()=>m(e,r),children:[(0,t.jsx)("span",{className:`text-xs font-mono w-8 ${c?"text-accent":""} ${i?"text-green-500":""} ${!c&&!i?"opacity-40":""}`,children:r+1}),(0,t.jsx)("span",{className:`text-sm truncate flex-1 ${c?"text-accent font-medium":""} ${i?"text-green-500":""}`,children:n.title}),i&&(0,t.jsx)(l,{size:14,className:"text-green-500 flex-shrink-0"}),c&&(0,t.jsxs)("span",{className:"text-[10px] text-accent/80 font-mono",children:["Chunk ",a.chunkIndex+1]}),n.wordCount&&(0,t.jsxs)("span",{className:"text-xs opacity-30",children:[n.wordCount.toLocaleString()," words"]})]},r)})})]},e.id)})})]}),e.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-sm font-bold uppercase tracking-widest opacity-50 mb-4 flex items-center gap-2",children:[(0,t.jsx)(eh,{size:14})," AI Generated Snippets (",e.length,")"]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:e.map(e=>(0,t.jsxs)("div",{className:"group relative p-8 border border-[#2c2e33] rounded-xl hover:border-accent cursor-pointer bg-white/2 transition-colors",onClick:()=>o(e),children:[(0,t.jsx)("h3",{className:"text-xl font-bold truncate pr-8",children:e.title}),(0,t.jsx)("p",{className:"text-sm opacity-40 mt-1",children:e.author}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),d(e.id)},className:"absolute top-8 right-8 opacity-0 group-hover:opacity-100 p-2 text-red-500/50 hover:text-red-500 transition-all",children:(0,t.jsx)(el,{size:18})})]},e.id))})]}),0===s.length&&0===e.length&&(0,t.jsxs)("div",{className:"text-center py-16 opacity-50",children:[(0,t.jsx)($,{size:48,className:"mx-auto mb-4 opacity-30"}),(0,t.jsx)("p",{className:"text-sm",children:"No books yet. Import an EPUB or generate AI text to get started."})]})]})}let eu=i("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),ex=i("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),ef=i("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),eb=i("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),eg=i("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),ey=i("case-sensitive",[["path",{d:"m2 16 4.039-9.69a.5.5 0 0 1 .923 0L11 16",key:"d5nyq2"}],["path",{d:"M22 9v7",key:"pvm9v3"}],["path",{d:"M3.304 13h6.392",key:"1q3zxz"}],["circle",{cx:"18.5",cy:"12.5",r:"3.5",key:"z97x68"}]]);function ej(e){let s,n,r,c,i,l,o,d,h,m,p,u,x,f,b,g,y,j,v,k,w,N,C,S,_,T,I,E,A,R,z,$,F,O,P,B,L,D,W,U,H,q,K,Y,V,J,X,Z,Q,ee,et,ea,es,en,er,ec,ei,ed,eh,em,ep,ej=(0,M.c)(140),{soundEnabled:ev,volume:ek,fontSize:ew,fontFamily:eN,blurEnabled:eC,backgroundImage:eS,backgroundOpacity:e_,backgroundBlur:eT,ignoreCaps:eI,autoSkipChars:eE,onSoundToggle:eA,onVolumeChange:eR,onFontFamilyChange:eM,onFontSizeChange:ez,onBlurToggle:e$,onBackgroundImageChange:eF,onBackgroundOpacityChange:eO,onBackgroundBlurChange:eP,onBackgroundImageRemove:eB,onIgnoreCapsToggle:eL,onAutoSkipCharsChange:eD}=e,eW=(0,a.useRef)(null);ej[0]!==eF?(s=e=>{let t=e.target.files?.[0];if(t){if(t.size>0xa00000)return void alert("Image size should be less than 10MB");let e=new FileReader;e.onload=e=>{eF(e.target.result)},e.readAsDataURL(t)}eW.current&&(eW.current.value="")},ej[0]=eF,ej[1]=s):s=ej[1];let eU=s;ej[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)("h3",{className:"text-xs uppercase tracking-[0.2em] font-bold opacity-30 mb-8",children:"Audio Settings"}),ej[2]=n):n=ej[2],ej[3]!==ev?(r=ev?(0,t.jsx)(eu,{size:20,className:"text-accent"}):(0,t.jsx)(ex,{size:20,className:"opacity-30"}),ej[3]=ev,ej[4]=r):r=ej[4],ej[5]===Symbol.for("react.memo_cache_sentinel")?(c=(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-bold",children:"Typing Sounds"}),(0,t.jsx)("p",{className:"text-[10px] opacity-40 uppercase tracking-wider",children:"Mechanical Switch Synthesis"})]}),ej[5]=c):c=ej[5],ej[6]!==r?(i=(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[r,c]}),ej[6]=r,ej[7]=i):i=ej[7];let eH=`w-12 h-6 rounded-full transition-all relative ${ev?"bg-accent":"bg-[#2c2e33]"}`,eq=`absolute top-1 w-4 h-4 rounded-full bg-[#1a1b1e] transition-all ${ev?"left-7":"left-1"}`;ej[8]!==eq?(l=(0,t.jsx)("div",{className:eq}),ej[8]=eq,ej[9]=l):l=ej[9],ej[10]!==eA||ej[11]!==eH||ej[12]!==l?(o=(0,t.jsx)("button",{onClick:eA,className:eH,children:l}),ej[10]=eA,ej[11]=eH,ej[12]=l,ej[13]=o):o=ej[13],ej[14]!==i||ej[15]!==o?(d=(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[i,o]}),ej[14]=i,ej[15]=o,ej[16]=d):d=ej[16],ej[17]===Symbol.for("react.memo_cache_sentinel")?(h=(0,t.jsx)("span",{children:"Volume"}),ej[17]=h):h=ej[17],ej[18]!==ek?(m=Math.round(100*ek),ej[18]=ek,ej[19]=m):m=ej[19],ej[20]!==m?(p=(0,t.jsxs)("div",{className:"flex justify-between text-[10px] uppercase font-bold opacity-30",children:[h,(0,t.jsxs)("span",{children:[m,"%"]})]}),ej[20]=m,ej[21]=p):p=ej[21],ej[22]!==eR?(u=e=>eR(parseFloat(e.target.value)),ej[22]=eR,ej[23]=u):u=ej[23],ej[24]!==u||ej[25]!==ek?(x=(0,t.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:ek,onChange:u,className:"w-full h-1.5 bg-[#2c2e33] rounded-lg appearance-none cursor-pointer accent-accent"}),ej[24]=u,ej[25]=ek,ej[26]=x):x=ej[26],ej[27]!==p||ej[28]!==x?(f=(0,t.jsxs)("div",{className:"space-y-4",children:[p,x]}),ej[27]=p,ej[28]=x,ej[29]=f):f=ej[29],ej[30]!==d||ej[31]!==f?(b=(0,t.jsxs)("section",{children:[n,(0,t.jsxs)("div",{className:"bg-white/5 border border-[#2c2e33] rounded-xl p-6 space-y-8",children:[d,f]})]}),ej[30]=d,ej[31]=f,ej[32]=b):b=ej[32],ej[33]===Symbol.for("react.memo_cache_sentinel")?(g=(0,t.jsx)("h3",{className:"text-xs uppercase tracking-[0.2em] font-bold opacity-30 mb-8",children:"Visual Effects"}),ej[33]=g):g=ej[33],ej[34]!==eC?(y=eC?(0,t.jsx)(ef,{size:20,className:"text-accent"}):(0,t.jsx)(eb,{size:20,className:"opacity-30"}),ej[34]=eC,ej[35]=y):y=ej[35],ej[36]===Symbol.for("react.memo_cache_sentinel")?(j=(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-bold",children:"Text Blur Effect"}),(0,t.jsx)("p",{className:"text-[10px] opacity-40 uppercase tracking-wider",children:"Blur upcoming text while typing"})]}),ej[36]=j):j=ej[36],ej[37]!==y?(v=(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[y,j]}),ej[37]=y,ej[38]=v):v=ej[38];let eG=`w-12 h-6 rounded-full transition-all relative ${eC?"bg-accent":"bg-[#2c2e33]"}`,eK=`absolute top-1 w-4 h-4 rounded-full bg-[#1a1b1e] transition-all ${eC?"left-7":"left-1"}`;ej[39]!==eK?(k=(0,t.jsx)("div",{className:eK}),ej[39]=eK,ej[40]=k):k=ej[40],ej[41]!==e$||ej[42]!==eG||ej[43]!==k?(w=(0,t.jsx)("button",{onClick:e$,className:eG,children:k}),ej[41]=e$,ej[42]=eG,ej[43]=k,ej[44]=w):w=ej[44],ej[45]!==v||ej[46]!==w?(N=(0,t.jsxs)("section",{children:[g,(0,t.jsx)("div",{className:"bg-white/5 border border-[#2c2e33] rounded-xl p-6 space-y-8",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[v,w]})})]}),ej[45]=v,ej[46]=w,ej[47]=N):N=ej[47],ej[48]===Symbol.for("react.memo_cache_sentinel")?(C=(0,t.jsx)("h3",{className:"text-xs uppercase tracking-[0.2em] font-bold opacity-30 mb-8",children:"Typing Behavior"}),ej[48]=C):C=ej[48];let eY=eI?"opacity-30":"text-accent";ej[49]!==eY?(S=(0,t.jsx)(ey,{size:20,className:eY}),ej[49]=eY,ej[50]=S):S=ej[50],ej[51]===Symbol.for("react.memo_cache_sentinel")?(_=(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-bold",children:"Ignore Capital Letters"}),(0,t.jsx)("p",{className:"text-[10px] opacity-40 uppercase tracking-wider",children:"Treat uppercase and lowercase as same"})]}),ej[51]=_):_=ej[51],ej[52]!==S?(T=(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[S,_]}),ej[52]=S,ej[53]=T):T=ej[53];let eV=`w-12 h-6 rounded-full transition-all relative ${eI?"bg-accent":"bg-[#2c2e33]"}`,eJ=`absolute top-1 w-4 h-4 rounded-full bg-[#1a1b1e] transition-all ${eI?"left-7":"left-1"}`;ej[54]!==eJ?(I=(0,t.jsx)("div",{className:eJ}),ej[54]=eJ,ej[55]=I):I=ej[55],ej[56]!==eL||ej[57]!==eV||ej[58]!==I?(E=(0,t.jsx)("button",{onClick:eL,className:eV,children:I}),ej[56]=eL,ej[57]=eV,ej[58]=I,ej[59]=E):E=ej[59],ej[60]!==T||ej[61]!==E?(A=(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[T,E]}),ej[60]=T,ej[61]=E,ej[62]=A):A=ej[62];let eX=eE?"text-accent":"opacity-30";ej[63]!==eX?(R=(0,t.jsx)(G,{size:20,className:eX}),ej[63]=eX,ej[64]=R):R=ej[64],ej[65]===Symbol.for("react.memo_cache_sentinel")?(z=(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-bold",children:"Auto Skip Characters"}),(0,t.jsx)("p",{className:"text-[10px] opacity-40 uppercase tracking-wider",children:"Automatically fill these characters"})]}),ej[65]=z):z=ej[65],ej[66]!==R?($=(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[R,z]}),ej[66]=R,ej[67]=$):$=ej[67],ej[68]!==eD?(F=e=>eD(e.target.value),ej[68]=eD,ej[69]=F):F=ej[69],ej[70]!==eE||ej[71]!==F?(O=(0,t.jsx)("input",{type:"text",value:eE,onChange:F,placeholder:"e.g., '\"<>/;|",className:"w-full bg-black/20 border border-white/10 rounded-lg px-4 py-2 text-sm font-mono focus:outline-none focus:border-accent placeholder:opacity-30"}),ej[70]=eE,ej[71]=F,ej[72]=O):O=ej[72],ej[73]===Symbol.for("react.memo_cache_sentinel")?(P=(0,t.jsxs)("p",{className:"text-[10px] opacity-30",children:["Common: ",(0,t.jsx)("code",{className:"bg-white/5 px-1 rounded",children:"'\"<>/;|\\"})," â€” Enter the exact characters to skip"]}),ej[73]=P):P=ej[73],ej[74]!==$||ej[75]!==O?(B=(0,t.jsxs)("div",{className:"space-y-4",children:[$,O,P]}),ej[74]=$,ej[75]=O,ej[76]=B):B=ej[76],ej[77]!==A||ej[78]!==B?(L=(0,t.jsxs)("section",{children:[C,(0,t.jsxs)("div",{className:"bg-white/5 border border-[#2c2e33] rounded-xl p-6 space-y-8",children:[A,B]})]}),ej[77]=A,ej[78]=B,ej[79]=L):L=ej[79],ej[80]===Symbol.for("react.memo_cache_sentinel")?(D=(0,t.jsx)("h3",{className:"text-xs uppercase tracking-[0.2em] font-bold opacity-30 mb-8",children:"Background"}),ej[80]=D):D=ej[80];let eZ=eS?"text-accent":"opacity-30";ej[81]!==eZ?(W=(0,t.jsx)(eg,{size:20,className:eZ}),ej[81]=eZ,ej[82]=W):W=ej[82],ej[83]===Symbol.for("react.memo_cache_sentinel")?(U=(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-bold",children:"Custom Background"}),(0,t.jsx)("p",{className:"text-[10px] opacity-40 uppercase tracking-wider",children:"Upload an image (max 10MB)"})]}),ej[83]=U):U=ej[83],ej[84]!==W?(H=(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[W,U]}),ej[84]=W,ej[85]=H):H=ej[85],ej[86]!==eU?(q=(0,t.jsx)("input",{type:"file",ref:eW,accept:"image/*",onChange:eU,className:"hidden"}),ej[86]=eU,ej[87]=q):q=ej[87],ej[88]!==eT||ej[89]!==eS||ej[90]!==e_||ej[91]!==eP||ej[92]!==eB||ej[93]!==eO?(K=eS?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"relative rounded-lg overflow-hidden h-32 bg-black/20",children:[(0,t.jsx)("img",{src:eS,alt:"Background preview",className:"w-full h-full object-cover",style:{opacity:e_,filter:eT>0?`blur(${eT}px)`:"none",transform:eT>0?"scale(1.1)":"none"}}),(0,t.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 opacity-0 hover:opacity-100 transition-opacity",children:[(0,t.jsxs)("button",{onClick:()=>eW.current?.click(),className:"px-3 py-2 bg-white/10 hover:bg-white/20 rounded-lg text-xs font-bold uppercase tracking-wider mr-2 transition-colors",children:[(0,t.jsx)(eo,{size:14,className:"inline mr-1"}),"Change"]}),(0,t.jsxs)("button",{onClick:eB,className:"px-3 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg text-xs font-bold uppercase tracking-wider transition-colors",children:[(0,t.jsx)(el,{size:14,className:"inline mr-1"}),"Remove"]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between text-[10px] uppercase font-bold opacity-30",children:[(0,t.jsx)("span",{children:"Background Opacity"}),(0,t.jsxs)("span",{children:[Math.round(100*e_),"%"]})]}),(0,t.jsx)("input",{type:"range",min:"0.05",max:"1",step:"0.05",value:e_,onChange:e=>eO(parseFloat(e.target.value)),className:"w-full h-1.5 bg-[#2c2e33] rounded-lg appearance-none cursor-pointer accent-accent"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between text-[10px] uppercase font-bold opacity-30",children:[(0,t.jsx)("span",{children:"Background Blur"}),(0,t.jsxs)("span",{children:[eT,"px"]})]}),(0,t.jsx)("input",{type:"range",min:"0",max:"30",step:"1",value:eT,onChange:e=>eP(parseInt(e.target.value)),className:"w-full h-1.5 bg-[#2c2e33] rounded-lg appearance-none cursor-pointer accent-accent"})]})]}):(0,t.jsxs)("button",{onClick:()=>eW.current?.click(),className:"w-full py-8 border-2 border-dashed border-[#2c2e33] hover:border-accent/50 rounded-xl transition-colors flex flex-col items-center gap-2 group",children:[(0,t.jsx)(eo,{size:24,className:"opacity-30 group-hover:opacity-60 transition-opacity"}),(0,t.jsx)("span",{className:"text-xs opacity-40 group-hover:opacity-60 uppercase tracking-wider transition-opacity",children:"Click to upload image"})]}),ej[88]=eT,ej[89]=eS,ej[90]=e_,ej[91]=eP,ej[92]=eB,ej[93]=eO,ej[94]=K):K=ej[94],ej[95]!==H||ej[96]!==q||ej[97]!==K?(Y=(0,t.jsxs)("section",{children:[D,(0,t.jsx)("div",{className:"bg-white/5 border border-[#2c2e33] rounded-xl p-6 space-y-8",children:(0,t.jsxs)("div",{className:"space-y-4",children:[H,q,K]})})]}),ej[95]=H,ej[96]=q,ej[97]=K,ej[98]=Y):Y=ej[98],ej[99]===Symbol.for("react.memo_cache_sentinel")?(V=(0,t.jsx)("h3",{className:"text-xs uppercase tracking-[0.2em] font-bold opacity-30 mb-8",children:"Typography"}),ej[99]=V):V=ej[99],ej[100]!==eM?(J=()=>eM("font-mono"),ej[100]=eM,ej[101]=J):J=ej[101];let eQ=`p-6 border rounded-xl transition-all text-left ${"font-mono"===eN?"border-accent bg-accent/5":"border-[#2c2e33]"}`;ej[102]===Symbol.for("react.memo_cache_sentinel")?(X=(0,t.jsx)("div",{className:"font-mono text-xl mb-1",children:"JetBrains Mono"}),ej[102]=X):X=ej[102],ej[103]!==J||ej[104]!==eQ?(Z=(0,t.jsx)("button",{onClick:J,className:eQ,children:X}),ej[103]=J,ej[104]=eQ,ej[105]=Z):Z=ej[105],ej[106]!==eM?(Q=()=>eM("font-serif"),ej[106]=eM,ej[107]=Q):Q=ej[107];let e0=`p-6 border rounded-xl transition-all text-left ${"font-serif"===eN?"border-accent bg-accent/5":"border-[#2c2e33]"}`;ej[108]===Symbol.for("react.memo_cache_sentinel")?(ee=(0,t.jsx)("div",{className:"font-serif text-xl mb-1",children:"Lora Serif"}),ej[108]=ee):ee=ej[108],ej[109]!==Q||ej[110]!==e0?(et=(0,t.jsx)("button",{onClick:Q,className:e0,children:ee}),ej[109]=Q,ej[110]=e0,ej[111]=et):et=ej[111],ej[112]!==eM?(ea=()=>eM("font-sans"),ej[112]=eM,ej[113]=ea):ea=ej[113];let e1=`p-6 border rounded-xl transition-all text-left ${"font-sans"===eN?"border-accent bg-accent/5":"border-[#2c2e33]"}`;return ej[114]===Symbol.for("react.memo_cache_sentinel")?(es=(0,t.jsx)("div",{className:"font-sans text-xl mb-1",children:"Sofia Pro"}),ej[114]=es):es=ej[114],ej[115]!==ea||ej[116]!==e1?(en=(0,t.jsx)("button",{onClick:ea,className:e1,children:es}),ej[115]=ea,ej[116]=e1,ej[117]=en):en=ej[117],ej[118]!==Z||ej[119]!==et||ej[120]!==en?(er=(0,t.jsxs)("section",{children:[V,(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[Z,et,en]})]}),ej[118]=Z,ej[119]=et,ej[120]=en,ej[121]=er):er=ej[121],ej[122]===Symbol.for("react.memo_cache_sentinel")?(ec=(0,t.jsx)("h3",{className:"text-xs uppercase tracking-[0.2em] font-bold opacity-30",children:"Font Size"}),ej[122]=ec):ec=ej[122],ej[123]!==ew?(ei=(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[ec,(0,t.jsxs)("span",{className:"font-mono text-accent",children:[ew,"px"]})]}),ej[123]=ew,ej[124]=ei):ei=ej[124],ej[125]!==ez?(ed=e=>ez(parseInt(e.target.value)),ej[125]=ez,ej[126]=ed):ed=ej[126],ej[127]!==ew||ej[128]!==ed?(eh=(0,t.jsx)("input",{type:"range",min:"18",max:"42",value:ew,onChange:ed,className:"w-full h-1.5 bg-[#2c2e33] rounded-lg appearance-none cursor-pointer accent-accent"}),ej[127]=ew,ej[128]=ed,ej[129]=eh):eh=ej[129],ej[130]!==ei||ej[131]!==eh?(em=(0,t.jsxs)("section",{children:[ei,eh]}),ej[130]=ei,ej[131]=eh,ej[132]=em):em=ej[132],ej[133]!==b||ej[134]!==N||ej[135]!==L||ej[136]!==Y||ej[137]!==er||ej[138]!==em?(ep=(0,t.jsxs)("div",{className:"max-w-2xl mx-auto py-10 space-y-16 animate-in fade-in duration-500",children:[b,N,L,Y,er,em]}),ej[133]=b,ej[134]=N,ej[135]=L,ej[136]=Y,ej[137]=er,ej[138]=em,ej[139]=ep):ep=ej[139],ep}let ev=i("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),ek=i("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),ew=[{name:"Speed",icon:ec,achievements:["FIRST_WORDS","SPEED_DEMON","ROCKET_FINGERS","LIGHTNING_HANDS"]},{name:"Accuracy",icon:i("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),achievements:["PERFECTIONIST","STEADY_HANDS"]},{name:"Combo",icon:Y,achievements:["COMBO_STARTER","COMBO_MASTER","COMBO_LEGEND"]},{name:"Reading",icon:$,achievements:["CHAPTER_CRUSHER","BOOKWORM","BOOK_FINISHER"]},{name:"Time",icon:i("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),achievements:["NIGHT_OWL","EARLY_BIRD","MARATHON_TYPER"]},{name:"Streak",icon:i("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),achievements:["THREE_DAY_STREAK","WEEK_STREAK","MONTH_STREAK"]}];function eN(e){let a,s,n,r,c,i,l,o,d,h,m,p,u,x,f,b,g,y,j=(0,M.c)(40),{unlockedAchievements:v,stats:k}=e;if(j[0]!==v||j[1]!==k){let e;n=void 0===v?[]:v,j[5]!==k?(e=void 0===k?{}:k,j[5]=k,j[6]=e):e=j[6],a=e,s=new Set(n.map(e_)),j[0]=v,j[1]=k,j[2]=a,j[3]=s,j[4]=n}else a=j[2],s=j[3],n=j[4];let w=s,N=n.length;j[7]===Symbol.for("react.memo_cache_sentinel")?(r=Object.keys(X),j[7]=r):r=j[7];let C=r.length;j[8]!==N?(c=C>0?Math.round(N/C*100):0,j[8]=N,j[9]=c):c=j[9];let S=c;j[10]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-accent/10 mb-4",children:(0,t.jsx)(B,{className:"text-accent",size:40})}),l=(0,t.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Achievements"}),j[10]=i,j[11]=l):(i=j[10],l=j[11]),j[12]!==N?(o=(0,t.jsxs)("p",{className:"text-sm opacity-50 mb-4",children:[N," / ",C," unlocked"]}),j[12]=N,j[13]=o):o=j[13];let _=`${S}%`;return j[14]!==_?(d=(0,t.jsx)("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-gradient-to-r from-accent to-orange-500 transition-all duration-500",style:{width:_}})}),j[14]=_,j[15]=d):d=j[15],j[16]!==S?(h=(0,t.jsxs)("p",{className:"text-xs opacity-30 mt-2",children:[S,"% Complete"]}),j[16]=S,j[17]=h):h=j[17],j[18]!==d||j[19]!==h?(m=(0,t.jsxs)("div",{className:"max-w-xs mx-auto",children:[d,h]}),j[18]=d,j[19]=h,j[20]=m):m=j[20],j[21]!==m||j[22]!==o?(p=(0,t.jsxs)("div",{className:"text-center mb-12",children:[i,l,o,m]}),j[21]=m,j[22]=o,j[23]=p):p=j[23],j[24]!==a?(u=Object.keys(a).length>0&&(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-12",children:[a.totalCharsTyped&&(0,t.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 text-center",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-accent",children:a.totalCharsTyped.toLocaleString()}),(0,t.jsx)("p",{className:"text-xs opacity-40 uppercase tracking-wider",children:"Chars Typed"})]}),a.totalChunksCompleted&&(0,t.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 text-center",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-accent",children:a.totalChunksCompleted}),(0,t.jsx)("p",{className:"text-xs opacity-40 uppercase tracking-wider",children:"Chunks Done"})]}),a.bestWpm&&(0,t.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 text-center",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-accent",children:a.bestWpm}),(0,t.jsx)("p",{className:"text-xs opacity-40 uppercase tracking-wider",children:"Best WPM"})]}),a.bestCombo&&(0,t.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 text-center",children:[(0,t.jsxs)("p",{className:"text-2xl font-bold text-orange-500",children:[a.bestCombo,"x"]}),(0,t.jsx)("p",{className:"text-xs opacity-40 uppercase tracking-wider",children:"Best Combo"})]})]}),j[24]=a,j[25]=u):u=j[25],j[26]!==w?(x=ew.map(e=>{let a=e.icon,s=e.achievements.map(e=>({...X[e],isUnlocked:w.has(X[e].id)})),n=s.filter(eS).length;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,t.jsx)(a,{size:20,className:"text-accent"}),(0,t.jsx)("h3",{className:"text-sm font-bold uppercase tracking-widest opacity-50",children:e.name}),(0,t.jsxs)("span",{className:"text-xs opacity-30",children:[n,"/",s.length]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(eC)})]},e.name)}),j[26]=w,j[27]=x):x=j[27],j[28]!==x?(f=(0,t.jsx)("div",{className:"space-y-8",children:x}),j[28]=x,j[29]=f):f=j[29],j[30]!==N?(b=N<C&&(0,t.jsx)("div",{className:"text-center mt-12 p-6 bg-white/5 border border-white/10 rounded-xl",children:(0,t.jsxs)("p",{className:"text-sm opacity-50",children:["Keep typing to unlock more achievements!",C-N," badges waiting to be earned."]})}),j[30]=N,j[31]=b):b=j[31],j[32]!==N?(g=N===C&&(0,t.jsxs)("div",{className:"text-center mt-12 p-6 bg-gradient-to-r from-accent/20 to-orange-500/20 border border-accent/30 rounded-xl",children:[(0,t.jsx)("p",{className:"text-lg font-bold text-accent mb-2",children:"ðŸŽ‰ LEGENDARY STATUS ACHIEVED! ðŸŽ‰"}),(0,t.jsx)("p",{className:"text-sm opacity-60",children:"You've unlocked every achievement. You are a true typing master!"})]}),j[32]=N,j[33]=g):g=j[33],j[34]!==p||j[35]!==u||j[36]!==f||j[37]!==b||j[38]!==g?(y=(0,t.jsxs)("div",{className:"max-w-4xl mx-auto py-10 animate-in fade-in duration-500",children:[p,u,f,b,g]}),j[34]=p,j[35]=u,j[36]=f,j[37]=b,j[38]=g,j[39]=y):y=j[39],y}function eC(e){return(0,t.jsxs)("div",{className:`relative p-4 rounded-xl border transition-all ${e.isUnlocked?"bg-accent/10 border-accent/30":"bg-white/5 border-white/10 opacity-50"}`,children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:`text-3xl ${e.isUnlocked?"":"grayscale opacity-30"}`,children:e.icon}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h4",{className:"font-bold text-sm truncate",children:e.name}),!e.isUnlocked&&(0,t.jsx)(ev,{size:12,className:"opacity-30 flex-shrink-0"})]}),(0,t.jsx)("p",{className:"text-xs opacity-50 mt-1",children:e.description})]})]}),e.isUnlocked&&(0,t.jsx)("div",{className:"absolute top-2 right-2",children:(0,t.jsx)(ek,{size:14,className:"text-accent fill-accent"})})]},e.id)}function eS(e){return e.isUnlocked}function e_(e){return e.id}let eT=i("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),eI=i("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),eE=i("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);function eA(e){let s,n,r,c,i,l,o,d,h,m,p,u,x,f,b,g,y,j,v,k,w,N,C,S,_,T,I,E,A,R,z,$,F,O,P,L,D,W,U,H,q=(0,M.c)(90),{isOpen:G,onClose:K,data:Y}=e,V=(0,a.useRef)(null);if(!G||!Y)return null;if(q[0]!==Y)s={title:ea[Math.floor(Math.random()*ea.length)],quote:es[Math.floor(Math.random()*es.length)],recipientName:Y.bookTitle||"Unknown Challenge",completedAt:new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),stats:{wpm:Y.wpm,accuracy:Y.accuracy,totalChars:Y.totalChars,totalChapters:Y.totalChapters},certificateId:`LT-${Date.now().toString(36).toUpperCase()}`},q[0]=Y,q[1]=s;else s=q[1];let X=s;q[2]!==Y.wpm?(n=J(Y.wpm),q[2]=Y.wpm,q[3]=n):n=q[3];let Z=n;q[4]!==X.certificateId||q[5]!==X.completedAt||q[6]!==X.quote||q[7]!==X.title||q[8]!==Y.accuracy||q[9]!==Y.bookTitle||q[10]!==Y.totalChapters||q[11]!==Y.totalChars||q[12]!==Y.wpm||q[13]!==Z.animal?(r=async()=>{let e=new Blob([`
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    CERTIFICATE OF COMPLETION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                          ${X.title}

    This certifies that on ${X.completedAt}

    A brave soul has completed:
    "${Y.bookTitle}"

    ${X.quote}

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Speed: ${Y.wpm} WPM ${Z.animal}
    â”‚  Accuracy: ${Y.accuracy}%
    â”‚  Total Characters: ${Y.totalChars?.toLocaleString()||"N/A"}
    â”‚  Chapters Conquered: ${Y.totalChapters||"N/A"}
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Certificate ID: ${X.certificateId}

                    Powered by LuminaType
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    `.trim()],{type:"text/plain"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download=`LuminaType-Certificate-${X.certificateId}.txt`,a.click(),URL.revokeObjectURL(t)},q[4]=X.certificateId,q[5]=X.completedAt,q[6]=X.quote,q[7]=X.title,q[8]=Y.accuracy,q[9]=Y.bookTitle,q[10]=Y.totalChapters,q[11]=Y.totalChars,q[12]=Y.wpm,q[13]=Z.animal,q[14]=r):r=q[14];let Q=r;q[15]!==X.quote||q[16]!==Y.accuracy||q[17]!==Y.bookTitle||q[18]!==Y.wpm||q[19]!==Z.animal?(c=async()=>{let e=`ðŸ† I just completed "${Y.bookTitle}" on LuminaType!

${Z.animal} ${Y.wpm} WPM | ${Y.accuracy}% Accuracy

${X.quote}

#LuminaType #TypingPractice`;if(navigator.share)try{await navigator.share({title:"LuminaType Certificate",text:e})}catch(t){navigator.clipboard.writeText(e),alert("Copied to clipboard!")}else navigator.clipboard.writeText(e),alert("Copied to clipboard!")},q[15]=X.quote,q[16]=Y.accuracy,q[17]=Y.bookTitle,q[18]=Y.wpm,q[19]=Z.animal,q[20]=c):c=q[20];let ee=c;return q[21]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t.jsx)(eT,{size:24}),q[21]=i):i=q[21],q[22]!==K?(l=(0,t.jsx)("button",{onClick:K,className:"absolute -top-12 right-0 p-2 opacity-50 hover:opacity-100 transition-opacity",children:i}),q[22]=K,q[23]=l):l=q[23],q[24]===Symbol.for("react.memo_cache_sentinel")?(d=(0,t.jsx)("div",{className:"absolute top-4 left-4 w-8 h-8 border-l-2 border-t-2 border-accent/30"}),h=(0,t.jsx)("div",{className:"absolute top-4 right-4 w-8 h-8 border-r-2 border-t-2 border-accent/30"}),m=(0,t.jsx)("div",{className:"absolute bottom-4 left-4 w-8 h-8 border-l-2 border-b-2 border-accent/30"}),o=(0,t.jsx)("div",{className:"absolute bottom-4 right-4 w-8 h-8 border-r-2 border-b-2 border-accent/30"}),q[24]=o,q[25]=d,q[26]=h,q[27]=m):(o=q[24],d=q[25],h=q[26],m=q[27]),q[28]===Symbol.for("react.memo_cache_sentinel")?(p=(0,t.jsxs)("div",{className:"flex justify-center gap-2 mb-2",children:[(0,t.jsx)(ek,{className:"text-accent",size:20}),(0,t.jsx)(ek,{className:"text-accent",size:24}),(0,t.jsx)(ek,{className:"text-accent",size:20})]}),u=(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] opacity-40 mb-1",children:"Certificate of Completion"}),q[28]=p,q[29]=u):(p=q[28],u=q[29]),q[30]!==X.title?(x=(0,t.jsxs)("div",{className:"text-center mb-6",children:[p,u,(0,t.jsx)("h1",{className:"text-2xl font-bold text-accent",children:X.title})]}),q[30]=X.title,q[31]=x):x=q[31],q[32]!==Z.animal?(f=(0,t.jsx)("span",{className:"text-6xl",children:Z.animal}),q[32]=Z.animal,q[33]=f):f=q[33],q[34]!==Z.name?(b=(0,t.jsx)("p",{className:"text-sm text-accent mt-1",children:Z.name}),q[34]=Z.name,q[35]=b):b=q[35],q[36]!==f||q[37]!==b?(g=(0,t.jsxs)("div",{className:"text-center mb-4",children:[f,b]}),q[36]=f,q[37]=b,q[38]=g):g=q[38],q[39]===Symbol.for("react.memo_cache_sentinel")?(y=(0,t.jsx)("p",{className:"text-xs opacity-40 uppercase tracking-wider mb-1",children:"Has Conquered"}),q[39]=y):y=q[39],q[40]!==Y.bookTitle?(j=(0,t.jsxs)("div",{className:"text-center mb-6",children:[y,(0,t.jsxs)("h2",{className:"text-xl font-serif italic opacity-90",children:['"',Y.bookTitle,'"']})]}),q[40]=Y.bookTitle,q[41]=j):j=q[41],q[42]!==X.quote?(v=(0,t.jsxs)("p",{className:"text-center text-sm opacity-60 italic mb-6 px-8",children:['"',X.quote,'"']}),q[42]=X.quote,q[43]=v):v=q[43],q[44]!==Y.wpm?(k=(0,t.jsx)("p",{className:"text-3xl font-bold text-accent",children:Y.wpm}),q[44]=Y.wpm,q[45]=k):k=q[45],q[46]===Symbol.for("react.memo_cache_sentinel")?(w=(0,t.jsx)("p",{className:"text-[10px] uppercase tracking-wider opacity-40",children:"WPM"}),q[46]=w):w=q[46],q[47]!==k?(N=(0,t.jsxs)("div",{className:"text-center",children:[k,w]}),q[47]=k,q[48]=N):N=q[48],q[49]!==Y.accuracy?(C=(0,t.jsxs)("p",{className:"text-3xl font-bold text-accent",children:[Y.accuracy,"%"]}),q[49]=Y.accuracy,q[50]=C):C=q[50],q[51]===Symbol.for("react.memo_cache_sentinel")?(S=(0,t.jsx)("p",{className:"text-[10px] uppercase tracking-wider opacity-40",children:"Accuracy"}),q[51]=S):S=q[51],q[52]!==C?(_=(0,t.jsxs)("div",{className:"text-center",children:[C,S]}),q[52]=C,q[53]=_):_=q[53],q[54]!==Y.totalChapters?(T=Y.totalChapters&&(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-3xl font-bold text-accent",children:Y.totalChapters}),(0,t.jsx)("p",{className:"text-[10px] uppercase tracking-wider opacity-40",children:"Chapters"})]}),q[54]=Y.totalChapters,q[55]=T):T=q[55],q[56]!==N||q[57]!==_||q[58]!==T?(I=(0,t.jsxs)("div",{className:"flex justify-center gap-8 mb-6",children:[N,_,T]}),q[56]=N,q[57]=_,q[58]=T,q[59]=I):I=q[59],q[60]===Symbol.for("react.memo_cache_sentinel")?(E=(0,t.jsx)("p",{className:"text-[10px] opacity-30",children:"Certificate ID"}),q[60]=E):E=q[60],q[61]!==X.certificateId?(A=(0,t.jsxs)("div",{children:[E,(0,t.jsx)("p",{className:"text-xs font-mono opacity-50",children:X.certificateId})]}),q[61]=X.certificateId,q[62]=A):A=q[62],q[63]===Symbol.for("react.memo_cache_sentinel")?(R=(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(B,{className:"text-accent",size:16}),(0,t.jsx)("span",{className:"text-sm font-bold",children:"LuminaType"})]}),q[63]=R):R=q[63],q[64]===Symbol.for("react.memo_cache_sentinel")?(z=(0,t.jsx)("p",{className:"text-[10px] opacity-30",children:"Issued On"}),q[64]=z):z=q[64],q[65]!==X.completedAt?($=(0,t.jsxs)("div",{className:"text-right",children:[z,(0,t.jsx)("p",{className:"text-xs opacity-50",children:X.completedAt})]}),q[65]=X.completedAt,q[66]=$):$=q[66],q[67]!==A||q[68]!==$?(F=(0,t.jsxs)("div",{className:"flex justify-between items-end pt-4 border-t border-white/10",children:[A,R,$]}),q[67]=A,q[68]=$,q[69]=F):F=q[69],q[70]!==x||q[71]!==g||q[72]!==j||q[73]!==v||q[74]!==I||q[75]!==F?(O=(0,t.jsxs)("div",{ref:V,className:"relative bg-gradient-to-br from-[#1a1b1e] via-[#252629] to-[#1a1b1e] border-4 border-double border-accent/50 rounded-lg p-8 shadow-2xl",children:[d,h,m,o,x,g,j,v,I,F]}),q[70]=x,q[71]=g,q[72]=j,q[73]=v,q[74]=I,q[75]=F,q[76]=O):O=q[76],q[77]===Symbol.for("react.memo_cache_sentinel")?(P=(0,t.jsx)(eI,{size:18}),q[77]=P):P=q[77],q[78]!==Q?(L=(0,t.jsxs)("button",{onClick:Q,className:"flex items-center gap-2 px-6 py-3 bg-accent text-[#1a1b1e] rounded-xl hover:scale-105 active:scale-95 transition-all font-bold text-sm",children:[P,"Download"]}),q[78]=Q,q[79]=L):L=q[79],q[80]===Symbol.for("react.memo_cache_sentinel")?(D=(0,t.jsx)(eE,{size:18}),q[80]=D):D=q[80],q[81]!==ee?(W=(0,t.jsxs)("button",{onClick:ee,className:"flex items-center gap-2 px-6 py-3 bg-white/10 hover:bg-white/20 rounded-xl transition-all font-bold text-sm",children:[D,"Share"]}),q[81]=ee,q[82]=W):W=q[82],q[83]!==L||q[84]!==W?(U=(0,t.jsxs)("div",{className:"flex justify-center gap-4 mt-6",children:[L,W]}),q[83]=L,q[84]=W,q[85]=U):U=q[85],q[86]!==O||q[87]!==U||q[88]!==l?(H=(0,t.jsx)("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md z-[60] flex items-center justify-center p-4 animate-in fade-in duration-300",children:(0,t.jsxs)("div",{className:"relative max-w-2xl w-full",children:[l,O,U]})}),q[86]=O,q[87]=U,q[88]=l,q[89]=H):H=q[89],H}let eR="The written  word is a powerful tool for self-discovery and connection. As you type these letters, notice the rhythm of your thoughts and the steady flow of language. Every keystroke is a step toward mastery.",eM="luminatype_settings",ez={isDark:!0,fontSize:24,fontFamily:"font-mono",soundEnabled:!0,volume:.5,blurEnabled:!0,backgroundImage:null,backgroundOpacity:.3,backgroundBlur:0,ignoreCaps:!1,autoSkipChars:""};function e$(){let e,s,n,r,[c,i]=(0,a.useState)("practice"),[d,h]=(0,a.useState)(!1),[m,p]=(0,a.useState)([]),[u,f]=(0,a.useState)([]),[M,z]=(0,a.useState)({}),[$,F]=(0,a.useState)(null),[O,P]=(0,a.useState)(!1),[B,D]=(0,a.useState)(""),[W,U]=(0,a.useState)(!0),[H,q]=(0,a.useState)(24),[G,K]=(0,a.useState)("font-mono"),[Y,V]=(0,a.useState)(!0),[J,X]=(0,a.useState)(.5),[Z,Q]=(0,a.useState)(!0),[ee,et]=(0,a.useState)(null),[ea,es]=(0,a.useState)(.3),[er,ec]=(0,a.useState)(0),[ei,el]=(0,a.useState)(!1),[eo,ed]=(0,a.useState)(""),[eh,em]=(0,a.useState)(eR),[eu,ex]=(0,a.useState)(""),[ef,eb]=(0,a.useState)(null),[eg,ey]=(0,a.useState)(0),[ev,ek]=(0,a.useState)(100),[ew,eC]=(0,a.useState)(!1),[eS,e_]=(0,a.useState)([eR]),[eT,eI]=(0,a.useState)(0),[eE,e$]=(0,a.useState)(null),[eF,eO]=(0,a.useState)({chapterIndex:0,chunkIndex:0,charIndex:0}),[eP,eB]=(0,a.useState)(0),[eL,eD]=(0,a.useState)(0),[eW,eU]=(0,a.useState)(0),[eH,eq]=(0,a.useState)(!1),[eG,eK]=(0,a.useState)(0),[eY,eV]=(0,a.useState)([]),[eJ,eX]=(0,a.useState)({}),[eZ,eQ]=(0,a.useState)(null),e0=(0,a.useRef)(null),e1=(0,a.useRef)(null),e2=(0,a.useRef)(!1),e3=(0,a.useRef)(null),e4=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(e2.current)return;e2.current=!0;let e=(()=>{try{let e=localStorage.getItem(eM);if(e)return{...ez,...JSON.parse(e)}}catch(e){console.warn("Failed to load settings:",e)}return ez})();U(e.isDark),q(e.fontSize),K(e.fontFamily),V(e.soundEnabled),X(e.volume),Q(e.blurEnabled),et(e.backgroundImage),es(e.backgroundOpacity),ec(e.backgroundBlur),el(e.ignoreCaps),ed(e.autoSkipChars)},[]),(0,a.useEffect)(()=>{if(e2.current)try{localStorage.setItem(eM,JSON.stringify({isDark:W,fontSize:H,fontFamily:G,soundEnabled:Y,volume:J,blurEnabled:Z,backgroundImage:ee,backgroundOpacity:ea,backgroundBlur:er,ignoreCaps:ei,autoSkipChars:eo}))}catch(e){console.warn("Failed to save settings:",e)}},[W,H,G,Y,J,Z,ee,ea,er,ei,eo]);let e7=(0,a.useCallback)((e,t="success")=>{F({msg:e,type:t}),setTimeout(()=>F(null),3e3)},[]),e5=(0,a.useCallback)(async()=>{try{let e=await C(),t={};e.forEach(e=>{t[e.bookId]=e}),z(t)}catch(e){console.warn("Failed to load reading progress:",e)}},[]),e6=(0,a.useCallback)((e=!1)=>{if(!eE||"epub"!==eE.type||!eE.bookId)return;e3.current&&clearTimeout(e3.current);let t=async()=>{try{await N(eE.bookId,{chapterIndex:eF.chapterIndex,chunkIndex:eF.chunkIndex,charIndex:eF.charIndex,totalChapters:eE.totalChapters,totalChunks:eS.length,chapterTitle:eE.chapterTitle}),z(e=>({...e,[eE.bookId]:{bookId:eE.bookId,chapterIndex:eF.chapterIndex,chunkIndex:eF.chunkIndex,charIndex:eF.charIndex,totalChapters:eE.totalChapters,totalChunks:eS.length,chapterTitle:eE.chapterTitle,updatedAt:Date.now()}}))}catch(e){console.warn("Failed to save progress:",e)}};e?t():e3.current=setTimeout(t,1e3)},[eE,eF,eS.length]),e8=(0,a.useCallback)((e,t=null,a=0,s=0)=>{let n=function(e,t=500){if(!e||e.length<=t)return[e];let a=[],s=e.trim();for(;s.length>0;){if(s.length<=800){a.push(s.trim());break}let e=function(e,t){let a=Math.max(0,t-100),s=Math.min(e.length,t+100),n=e.slice(a,s),r=n.lastIndexOf("\n\n");if(-1!==r&&r>50)return a+r+2;let c=-1;for(let e of[". ","! ","? ",'." ','!" ','?" ']){let t=n.lastIndexOf(e);-1!==t&&t>c&&(c=t)}if(-1!==c&&c>30)return a+c+2;let i=Math.max(n.lastIndexOf(", "),n.lastIndexOf("; "));if(-1!==i&&i>30)return a+i+2;let l=n.lastIndexOf(" ");return -1!==l?a+l+1:t}(s,t),n=s.slice(0,e).trim();n.length>=200?a.push(n):a.length>0?a[a.length-1]+=" "+n:a.push(n),s=s.slice(e).trim()}return a.filter(e=>e.length>0)}(e,500),r=Math.min(a,n.length-1);e_(n),eI(r),em(n[r]),ex(""),eb(null),ey(0),ek(100),eC(!1),e$(t),i("practice"),eB(0),eD(0),eU(0),t?.type==="epub"&&eO({chapterIndex:t.chapterIndex,chunkIndex:r,charIndex:s}),e1.current?.ctx.state==="suspended"&&e1.current.ctx.resume()},[]),e9=(0,a.useCallback)((e,t)=>{if(!t||!e.chapters)return;let a=Math.min(t.chapterIndex,e.chapters.length-1),s=e.chapters[a];e8(s.content,{type:"epub",bookId:e.id,bookTitle:e.title,chapterTitle:s.title,chapterIndex:a,totalChapters:e.chapters.length,chapters:e.chapters},t.chunkIndex||0,t.charIndex||0),e7(`Resumed: Ch.${a+1}, Chunk ${(t.chunkIndex||0)+1}`)},[e8,e7]),te=(0,a.useCallback)((e,t=!1)=>{e<0||e>=eS.length||(eI(e),em(eS[e]),ex(""),eb(null),ey(0),ek(100),eC(!1),eB(0),eU(0),e0.current?.focus(),t&&eE?.type==="epub"&&eO(t=>({...t,chunkIndex:e,charIndex:0})))},[eS,eE]),tt=(0,a.useCallback)((e=!1)=>{eT<eS.length-1&&(te(eT+1,e),e7(`Chunk ${eT+2} of ${eS.length}`),e&&eE?.type==="epub"&&eO(e=>({...e,chunkIndex:eT+1,charIndex:0})))},[eT,eS.length,te,e7,eE]),ta=(0,a.useCallback)(()=>{eT>0&&(te(eT-1,!1),e7(`Chunk ${eT} of ${eS.length}`))},[eT,eS.length,te,e7]),ts=(0,a.useCallback)(()=>{ex(""),eb(null),ey(0),ek(100),eC(!1),eB(0),eD(0),eU(0),e0.current?.focus()},[]),tn=(0,a.useCallback)(async()=>{try{let[e,t]=await Promise.all([_(),A()]);eV(e),eX(t)}catch(e){console.warn("Failed to load achievements:",e)}},[]),tr=(0,a.useCallback)(async(e,t,a,s)=>{let n=[];e>=60&&await S("speed_demon")&&n.push({id:"speed_demon",name:"Speed Demon",icon:"ðŸ˜ˆ"}),e>=80&&await S("rocket_fingers")&&n.push({id:"rocket_fingers",name:"Rocket Fingers",icon:"ðŸš€"}),e>=100&&await S("lightning_hands")&&n.push({id:"lightning_hands",name:"Lightning Hands",icon:"âš¡"}),s&&100===t&&await S("perfectionist")&&n.push({id:"perfectionist",name:"Perfectionist",icon:"ðŸ’Ž"}),a>=10&&await S("combo_starter")&&n.push({id:"combo_starter",name:"Combo Starter",icon:"ðŸ”¥"}),a>=50&&await S("combo_master")&&n.push({id:"combo_master",name:"Combo Master",icon:"ðŸ’¥"}),a>=100&&await S("combo_legend")&&n.push({id:"combo_legend",name:"Combo Legend",icon:"ðŸŒ‹"}),s&&await S("first_words")&&n.push({id:"first_words",name:"First Steps",icon:"ðŸ‘¶"});let r=new Date().getHours();if(r>=0&&r<5&&await S("night_owl")&&n.push({id:"night_owl",name:"Night Owl",icon:"ðŸ¦‰"}),r>=5&&r<7&&await S("early_bird")&&n.push({id:"early_bird",name:"Early Bird",icon:"ðŸ¦"}),n.length>0&&(eQ(n[0]),setTimeout(()=>eQ(null),3e3),tn()),s){let t=await I("bestWpm");(!t||e>t)&&await T("bestWpm",e);let s=await I("bestCombo");(!s||a>s)&&await T("bestCombo",a),await E("totalChunksCompleted")}},[tn]);(0,a.useEffect)(()=>{(async()=>{try{e1.current=new o,await new Promise((e,t)=>{if(window.Dexie||document.querySelector('script[src="/subi-typing/libs/dexie.min.js"]'))return e();let a=document.createElement("script");a.src="/subi-typing/libs/dexie.min.js",a.onload=e,a.onerror=t,document.head.appendChild(a)}),await b();let[e,t]=await Promise.all([j(),v()]);p(e),f(t),await e5(),await tn(),h(!0)}catch(e){console.error(e),e7("Failed to initialize","error")}})()},[e7,e5,tn]),(0,a.useEffect)(()=>{e1.current&&(e1.current.setEnabled(Y),e1.current.setVolume(J))},[Y,J]);let tc=(0,a.useCallback)((e,t)=>!!e&&!!t&&(ei?e.toLowerCase()===t.toLowerCase():e===t),[ei]);(0,a.useEffect)(()=>{if(1!==eu.length||ef||(eb(Date.now()),e1.current?.playStart()),eu.length>0&&!ew){let e=tc(eu[eu.length-1],eh[eu.length-1]);e1.current?.playKey(!e),e?(eB(e=>{let t=e+1;return eD(e=>Math.max(e,t)),t}),e4.current&&clearTimeout(e4.current),e4.current=setTimeout(()=>{eU(e=>Math.max(0,e-1))},100)):(eB(0),eU(e=>Math.min(15,e+1))),ey(function(e,t){if(!t||0===e.length)return 0;let a=(Date.now()-t)/6e4;return Math.round(e.length/5/a)||0}(eu,ef));let t=eu.split("").filter((e,t)=>tc(e,eh[t])).length;ek(eu.length>0?Math.round(t/eu.length*100):100),eE?.type==="epub"&&eO(e=>({...e,charIndex:eu.length}))}eu.length===eh.length&&eh.length>0&&!ew&&(eC(!0),e1.current?.playSuccess(),eK(e=>e+eh.length),tr(eg,Math.round(eu.split("").filter((e,t)=>tc(e,eh[t])).length/eu.length*100),eL,!0),E("totalCharsTyped",eh.length),eE?.type==="epub"&&eT>=eS.length-1&&eO(e=>({...e,charIndex:eh.length})))},[eu,ef,eh,ew,tc,eE,eT,eS.length,tr]),(0,a.useEffect)(()=>{eE?.type==="epub"&&eE.bookId&&eu.length>0&&e6()},[eF,e6,eE,eu.length]),(0,a.useEffect)(()=>()=>{e3.current&&clearTimeout(e3.current),e4.current&&clearTimeout(e4.current)},[]);let ti=(0,a.useMemo)(()=>{if(!eE||"epub"!==eE.type||!eE.chapters)return null;let e=eE.totalChapters,t=eE.chapterIndex,a=eS.length,s=0,n=0;for(let r=0;r<e;r++){let e=eE.chapters[r],c=e?.content?.length||0;n+=c,r<t?s+=c:r===t&&(s+=Math.floor(eT/a*c))}let r=e-t-1;return{percentage:n>0?s/n*100:0,completedChapters:t,totalChapters:e,estimatedRemaining:r>0?`${r} chapter${r>1?"s":""}`:"Almost done!"}},[eE,eT,eS.length]),tl=(0,a.useMemo)(()=>eE?{bookTitle:eE.bookTitle||"Typing Challenge",wpm:eg,accuracy:ev,totalChars:eG,totalChapters:eE.totalChapters}:null,[eE,eg,ev,eG]),to=(0,a.useCallback)(()=>{eq(!0)},[]),td=async()=>{if(B.trim()){P(!0);try{let e=await R(B),t={title:`âœ¨ AI: ${B}`,author:"Gemini",content:e,type:"ai"};await g(t),p(await j()),D(""),e7("AI Snippet Generated!")}catch(e){e7("AI Error","error")}finally{P(!1)}}},th=async(e,t)=>{try{let a=await x(e,t);await y(a),f(await v()),e7(`"${a.title}" imported with ${a.chapterCount} chapters!`)}catch(e){console.error(e),e7(e.message||"Failed to parse EPUB","error")}},tm=(0,a.useCallback)((e,t)=>{let a=e.chapters[t];e8(a.content,{type:"epub",bookId:e.id,bookTitle:e.title,chapterTitle:a.title,chapterIndex:t,totalChapters:e.chapters.length,chapters:e.chapters},0,0)},[e8]),tp=async(e,t="normal")=>{"epub"===t?(await w(e),f(await v()),z(t=>{let a={...t};return delete a[e],a})):(await k(e),p(await j())),e7("Book deleted")},tu=(0,a.useCallback)(e=>{let t=M[e.id];t&&(t.chapterIndex>0||t.chunkIndex>0||t.charIndex>0)?e9(e,t):tm(e,0)},[M,e9,tm]),tx=(0,a.useCallback)(e=>{let t=M[e.id];t&&e9(e,t)},[M,e9]),tf=(0,a.useCallback)(e=>{tm(e,0)},[tm]),tb=(0,a.useCallback)(()=>{if(!eE||"epub"!==eE.type)return;let e=eE.chapterIndex+1;if(e<eE.totalChapters){let t=eE.chapters[e];e8(t.content,{...eE,chapterTitle:t.title,chapterIndex:e},0,0),eO({chapterIndex:e,chunkIndex:0,charIndex:0}),e7(`Chapter ${e+1}: ${t.title}`)}},[eE,e8,e7]),tg=(0,a.useCallback)(()=>{if(!eE||"epub"!==eE.type)return;let e=eE.chapterIndex-1;if(e>=0){let t=eE.chapters[e];e8(t.content,{...eE,chapterTitle:t.title,chapterIndex:e},0,0),e7(`Chapter ${e+1}: ${t.title}`)}},[eE,e8,e7]),ty=(0,a.useCallback)(()=>{tt(!0)},[tt]),tj=(0,a.useCallback)(e=>{ei&&e.length>eu.length?ex(e.split("").map((e,t)=>{let a=eh[t];return a&&e.toLowerCase()===a.toLowerCase()?a:e}).join("")):ex(e)},[ei,eu.length,eh]),tv=(e=eS.length,s=eS.reduce((e,t)=>e+t.length,0),n=eS.slice(0,eT).reduce((e,t)=>e+t.length,0),r=eS[eT]||"",{current:eT+1,total:e,currentChunk:r,currentLength:r.length,totalChars:s,completedChars:n,progress:s>0?n/s*100:0,hasNext:eT<e-1,hasPrev:eT>0}),tk=W?"#1a1b1e":"#f8f9fa",tw=W?"#d1d0c5":"#444444";return(0,t.jsxs)("div",{className:"min-h-screen transition-colors duration-300 font-sans relative",style:{backgroundColor:tk,color:tw},children:[ee&&(0,t.jsx)("div",{className:"fixed inset-0 z-0 bg-cover bg-center bg-no-repeat pointer-events-none",style:{backgroundImage:`url(${ee})`,opacity:ea,filter:er>0?`blur(${er}px)`:"none",transform:er>0?"scale(1.1)":"none"}}),ee&&(0,t.jsx)("div",{className:"fixed inset-0 z-0 pointer-events-none",style:{backgroundColor:tk,opacity:.7}}),(0,t.jsx)("style",{children:`
        :root {
          --accent: ${W?"#e2b714":"#2563eb"};
          --border: ${W?"#2c2e33":"#e5e7eb"};
          --background: ${tk};
          --foreground: ${tw};
        }
        .text-accent { color: var(--accent); }
        .bg-accent { background-color: var(--accent); }

        @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
        @keyframes zoom-in-95 { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes slide-in-from-bottom-4 { from { transform: translateY(16px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes slide-in-from-top-4 { from { transform: translateX(-50%) translateY(-16px); opacity: 0; } to { transform: translateX(-50%) translateY(0); opacity: 1; } }
        .animate-in { animation-duration: 300ms; animation-fill-mode: both; }
        .fade-in { animation-name: fade-in; }
        .zoom-in-95 { animation-name: zoom-in-95; }
        .slide-in-from-bottom-4 { animation-name: slide-in-from-bottom-4; }
        .slide-in-from-top-4 { animation-name: slide-in-from-top-4; }
      `}),(0,t.jsxs)("div",{className:"relative z-10",children:[$&&(0,t.jsxs)("div",{className:`fixed top-4 right-4 z-50 flex items-center gap-3 px-4 py-3 rounded-lg shadow-2xl border backdrop-blur-sm ${"error"===$.type?"bg-red-900/80 border-red-500 text-red-200":"bg-green-900/80 border-green-500 text-green-200"}`,children:[(0,t.jsx)(l,{size:18})," ",(0,t.jsx)("span",{className:"text-sm font-medium",children:$.msg})]}),eZ&&(0,t.jsx)("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 z-50 animate-in slide-in-from-top-4 fade-in duration-300",children:(0,t.jsxs)("div",{className:"flex items-center gap-4 px-6 py-4 bg-gradient-to-r from-accent/90 to-orange-500/90 text-[#1a1b1e] rounded-xl shadow-2xl",children:[(0,t.jsx)("span",{className:"text-4xl",children:eZ.icon}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-bold uppercase tracking-wider opacity-80",children:"Achievement Unlocked!"}),(0,t.jsx)("p",{className:"text-lg font-bold",children:eZ.name})]})]})}),(0,t.jsx)(L,{view:c,setView:i,isDark:W,setIsDark:U}),(0,t.jsxs)("main",{className:"px-8 mt-12 max-w-7xl mx-auto pb-24",children:["practice"===c&&(0,t.jsx)(en,{text:eh,userInput:eu,wpm:eg,accuracy:ev,isFinished:ew,fontSize:H,fontFamily:G,blurEnabled:Z,ignoreCaps:ei,autoSkipChars:eo,inputRef:e0,onInputChange:tj,onRestart:ts,chunkInfo:tv,sourceInfo:eE,onNextChunk:ty,onPrevChunk:ta,onNextChapter:tb,onPrevChapter:tg,combo:eP,maxCombo:eL,recentErrors:eW,bookProgress:ti,onShowCertificate:to,totalStats:{totalTypedChars:eG}}),"library"===c&&(0,t.jsx)(ep,{books:m,epubBooks:u,readingProgressMap:M,prompt:B,isGenerating:O,onPromptChange:D,onGenerate:td,onSelectBook:e=>e8(e.content,{type:"ai",bookTitle:e.title}),onDeleteBook:tp,onUploadEpub:th,onSelectChapter:tm,onSelectEpubBook:tu,onResumeBook:tx,onStartFromBeginning:tf}),"achievements"===c&&(0,t.jsx)(eN,{unlockedAchievements:eY,stats:eJ}),"settings"===c&&(0,t.jsx)(ej,{soundEnabled:Y,volume:J,fontSize:H,fontFamily:G,blurEnabled:Z,backgroundImage:ee,backgroundOpacity:ea,backgroundBlur:er,ignoreCaps:ei,autoSkipChars:eo,onSoundToggle:()=>{V(!Y),Y||e1.current?.ctx.resume()},onVolumeChange:X,onFontFamilyChange:K,onFontSizeChange:q,onBlurToggle:()=>Q(!Z),onBackgroundImageChange:et,onBackgroundOpacityChange:es,onBackgroundBlurChange:ec,onBackgroundImageRemove:()=>et(null),onIgnoreCapsToggle:()=>el(!ei),onAutoSkipCharsChange:ed})]}),(0,t.jsx)("footer",{className:"fixed bottom-10 left-0 right-0 pointer-events-none",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-8 flex justify-center",children:(0,t.jsx)("div",{className:"px-4 py-2 bg-black/20 rounded-full border border-white/5 backdrop-blur-md",children:(0,t.jsx)("p",{className:"text-[10px] uppercase tracking-[0.3em] font-bold opacity-20 text-center",children:"Press Any Key to Focus â€¢ Shift + Enter to Restart â€¢ Arrow Keys for Chunks"})})})}),(0,t.jsx)(eA,{isOpen:eH,onClose:()=>eq(!1),data:tl})]})]})}e.s(["default",()=>e$],74647)}]);